<!doctype html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="점프 투 스프링부트 2장" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="부족한 JPA와 Thymeleaf에 익숙해지는 과정" /><meta property="og:description" content="부족한 JPA와 Thymeleaf에 익숙해지는 과정" /><link rel="canonical" href="https://backnback.github.io/posts/springboot-jpa-basic/" /><meta property="og:url" content="https://backnback.github.io/posts/springboot-jpa-basic/" /><meta property="og:site_name" content="리버" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-04T22:00:00+09:00" /><meta property="og:image" content="https://backnback.github.io/assets/img/profile.jpg" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://backnback.github.io/assets/img/profile.jpg" /><meta property="twitter:title" content="점프 투 스프링부트 2장" /><meta name="google-site-verification" content="googlea7baca2291ff3812.html" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-01-04T22:00:00+09:00","datePublished":"2025-01-04T22:00:00+09:00","description":"부족한 JPA와 Thymeleaf에 익숙해지는 과정","headline":"점프 투 스프링부트 2장","mainEntityOfPage":{"@type":"WebPage","@id":"https://backnback.github.io/posts/springboot-jpa-basic/"},"url":"https://backnback.github.io/posts/springboot-jpa-basic/"}</script><title>점프 투 스프링부트 2장 | 리버</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="리버"><meta name="application-name" content="리버"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/ko.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script async src="/assets/js/data/mathjax.js"></script> <script async src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml.js"></script> <script> let pv = document.getElementById('pageviews'); if (pv !== null) { const uri = location.pathname.replace(/\/$/, ''); const url = `https://blogcounterbacknback.goatcounter.com/counter/${encodeURIComponent(uri)}.json`; fetch(url) .then((response) => response.json()) .then((data) => { const count = data.count.replace(/\s/g, ''); pv.innerText = new Intl.NumberFormat().format(count); }) .catch((error) => { pv.innerText = '1'; }); } </script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-9ZSXFFWEB4"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-9ZSXFFWEB4'); }); </script> <script async src="https://gc.zgo.at/count.js" data-goatcounter="https://blogcounterbacknback.goatcounter.com/count" ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/profile.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">리버</a><p class="site-subtitle fst-italic mb-0">Backend 개발자</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>홈</span> </a><li class="nav-item"> <a href="/posts/" class="nav-link"> <i class="fa-fw fas fa-feather-alt"></i> <span>게시글</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>정보</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/backnback" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['garam8796','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">홈</a> </span> <span>점프 투 스프링부트 2장</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> 포스트</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">취소</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>점프 투 스프링부트 2장</h1><p class="post-desc fw-light mb-4">부족한 JPA와 Thymeleaf에 익숙해지는 과정</p><div class="post-meta text-muted"> <span> 게시 <time data-ts="1735995600" data-df="YYYY/MM/DD" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2025/01/04 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/backnback">이가람</a> </em> </span><div> <span> <em id="pageviews"> <i class="fas fa-spinner fa-spin small"></i> </em> 조회 </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="9699 단어" > <em>53 분</em>읽는 시간</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">점프 투 스프링부트 2장</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">바로가기</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">점프 투 스프링부트 2장</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><ul><li>2025/01/04<li>기존에 프로젝트 경험은 Mybatis와 React를 이용한 경험을 했지만 JPA와 Thymeleaf는 사용한 경험이 없다.<li>이를 해결하기 위해 기초 과정을 공부해본다.<li>참고   :   <a href="https://wikidocs.net/book/7601">https://wikidocs.net/book/7601</a></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="http-오류"><span class="me-2">HTTP 오류</span><a href="#http-오류" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><span class="red">404 오류</span>는 HTTP 오류 코드 중 하나로, 브라우저가 요청한 페이지를 찾을 수 없다는 의미<ul><li>요청한 URL과 매핑되는 메서드를 만들어야 한다.</ul><li><span class="red">500 오류</span>는 브라우저가 <code class="language-plaintext highlighter-rouge">http://localhost:8080/xxxx</code> 요청했을 때 해당하는 클래스의 해당하는 메서드가 호출되긴 했지만 원래 URL과 매핑된 메서드는 결괏값을 리턴해야 하는데 아무 값도 리턴하지 않아 이와 같은 오류가 발생<ul><li>반환 타입을 String으로 하고 <code class="language-plaintext highlighter-rouge">@ResponseBody</code> 애노테이션을 붙이지 않는다면 스프링부트는 문자열을 리턴하지 않고 리턴한 값에 해당하는 템플릿 파일을 찾는다.</ul><li><span class="red">405 오류</span>는 ‘Method Not Allowed’라는 의미로, <code class="language-plaintext highlighter-rouge">/question/create</code> 처럼 해당 URL을 POST 방식으로는 처리할 수 없음을 나타낸다.</ul><p><br /></p><p><br /></p><p><br /></p><h3 id="orm"><span class="me-2">ORM</span><a href="#orm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>ORM은 SQL을 사용하지 않고 데이터베이스를 관리할 수 있는 도구<li>ORM은 데이터베이스의 테이블을 자바 클래스로 만들어 관리할 수 있다<li><p>SQL 쿼리문이란 데이터베이스에 데이터를 저장, 조회, 수정, 삭제 등을 하기 위해 작성하는 명령문이다.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  <span class="n">insertinto</span> <span class="n">question</span> <span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span><span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'안녕하세요'</span><span class="p">,</span> <span class="s1">'가입 인사드립니다 ^^'</span><span class="p">);</span>
  <span class="n">insertinto</span> <span class="n">question</span> <span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span><span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'질문 있습니다'</span><span class="p">,</span> <span class="s1">'ORM이 궁금합니다'</span><span class="p">);</span>
</pre></table></code></div></div><p>하지만 ORM을 사용하면 이러한 쿼리문 대신 자바 코드로 다음처럼 작성할 수 있다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>  <span class="nc">Question</span> <span class="n">q1</span> <span class="o">=</span><span class="n">newQuestion</span><span class="o">();</span>
  <span class="n">q1</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="n">q1</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="s">"안녕하세요"</span><span class="o">);</span>
  <span class="n">q1</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="s">"가입 인사드립니다 ^^"</span><span class="o">);</span>
  <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">q1</span><span class="o">);</span>
    
  <span class="nc">Question</span> <span class="n">q2</span> <span class="o">=</span><span class="n">newQuestion</span><span class="o">();</span>
  <span class="n">q2</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
  <span class="n">q2</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="s">"질문 있습니다"</span><span class="o">);</span>
  <span class="n">q2</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="s">"ORM이 궁금합니다"</span><span class="o">);</span>
  <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">q2</span><span class="o">);</span>
</pre></table></code></div></div><li>별도의 SQL 문법을 배우지 않아도 데이터베이스를 사용할 수 있기 때문에 매우 편리<li>ORM을 이용하면 MySQL, 오라클 DB, MS SQL과 같은 DBMS의 종류에 관계 없이 일관된 자바 코드를 사용할 수 있어서 프로그램을 유지·보수하기가 편리<li>코드 내부에서 안정적인 SQL 쿼리문을 자동으로 생성</ul><p><br /></p><p><br /></p><p><br /></p><h3 id="jpa란"><span class="me-2"><strong>JPA란?</strong></span><a href="#jpa란" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>스프링 부트는 JPA(Java Persistence API)를 사용하여 데이터베이스를 관리<li>스프링 부트는 JPA를 ORM(Object-Relational Mapping) 기술의 표준으로 사용<li>JPA는 인터페이스 모음이므로, 이 인터페이스를 구현한 실제 클래스가 필<ul><li><p>JPA를 구현한 실제 클래스에는 대표적으로 하이버네이트(Hibernate)가 있다.</p><p>(하이버네이트는 JPA의 인터페이스를 구현한 실제 클래스이자 자바의 ORM 프레임워크)</p></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="h2-데이터베이스"><span class="me-2"><strong>H2 데이터베이스</strong></span><a href="#h2-데이터베이스" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>application.properties 파일</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  # DATABASE
  spring.h2.console.enabled=true
  spring.h2.console.path=/h2-console
  spring.datasource.url=jdbc:h2:~/local
  spring.datasource.driverClassName=org.h2.Driver
  spring.datasource.username=sa
  spring.datasource.password=
    
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">spring.h2.console.enabled</code><ul><li>H2 콘솔에 접속할 것인지 여부<li>H2 콘솔은 H2 데이터베이스를 웹 UI로 보여 주는 것</ul><li><code class="language-plaintext highlighter-rouge">spring.h2.console.path</code><ul><li>H2 콘솔로 접속하기 위한 URL 경로</ul><li><code class="language-plaintext highlighter-rouge">spring.datasource.url</code><ul><li>데이터베이스에 접속하기 위한 경로<li><code class="language-plaintext highlighter-rouge">=jdbc:h2:~/local</code><ul><li>특정 위치에 만들겠다는 것 (여기서는 local = 홈폴더)</ul><li><code class="language-plaintext highlighter-rouge">=jdbc:h2:mem:chat_dev</code><ul><li>메모리에 생성하겠다는 것</ul></ul><li><code class="language-plaintext highlighter-rouge">spring.datasource.driverClassName</code><ul><li>데이터베이스에 접속할 때 사용하는 드라이버 클래스명</ul><li><code class="language-plaintext highlighter-rouge">spring.datasource.username</code><ul><li>데이터베이스의 사용자명   (사용자명으로 기본값인 sa로 설정)</ul><li><code class="language-plaintext highlighter-rouge">spring.datasource.password</code><ul><li><p>데이터베이스의 비밀번호</p><p>(개발 용도로만 사용하므로 비밀번호를 설정하지 않고 비워 두었다)</p></ul></ul></ul><p><br /> <br /></p><ul><li><p><strong>implementation이란?</strong></p><p><code class="language-plaintext highlighter-rouge">build.gradle</code> 파일에서 작성한 <code class="language-plaintext highlighter-rouge">implementation</code>은 필요한 라이브러리 설치를 위해 가장 일반적으로 사용하는 설정이다. <code class="language-plaintext highlighter-rouge">implementation</code>은 해당 라이브러리가 변경되더라도 이 라이브러리와 연관된 모든 모듈을 컴파일하지 않고 변경된 내용과 관련이 있는 모듈만 컴파일하므로 프로젝트를 리빌드(rebuild)하는 속도가 빠르다.</p></ul><p><br /></p><ul><li><p><span class="path">application.properties</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>  <span class="err">#</span> <span class="no">JPA</span>
  <span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">properties</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">dialect</span><span class="o">=</span><span class="n">org</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">dialect</span><span class="o">.</span><span class="na">H2Dialect</span>
  <span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">ddl</span><span class="o">-</span><span class="n">auto</span><span class="o">=</span><span class="n">update</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">spring.jpa.properties.hibernate.dialect</code><ul><li>스프링 부트와 하이버네이트를 함께 사용할 때 필요한 설정 항목<li>표준 SQL이 아닌 하이버네이트만의 SQL을 사용할 때 필요한 항<ul><li>하이버네이트의 <code class="language-plaintext highlighter-rouge">org.hibernate.dialect.H2Dialect</code> 클래스를 설정<li><code class="language-plaintext highlighter-rouge">Spring Boot</code>가 자동으로 <code class="language-plaintext highlighter-rouge">Dialect</code>를 추론하기 때문에 생략할 수 있다</ul></ul><li><code class="language-plaintext highlighter-rouge">spring.jpa.hibernate.ddl-auto</code><ul><li>엔티티를 기준으로 데이터의 테이블을 생성하는 규칙을 설정<ul><li><code class="language-plaintext highlighter-rouge">none</code>   :   엔티티가 변경되더라도 데이터베이스를 변경하지 않는다.<li><code class="language-plaintext highlighter-rouge">update</code>   :   엔티티의 변경된 부분만 데이터베이스에 적용한다.<li><code class="language-plaintext highlighter-rouge">validate</code>   :   엔티티와 테이블 간에 차이점이 있는지 검사만 한다.<li><code class="language-plaintext highlighter-rouge">create</code>   :   스프링 부트 서버를 시작할 때 테이블을 모두 삭제한 후 다시 생성한다.<li><code class="language-plaintext highlighter-rouge">create-drop</code>   :   <code class="language-plaintext highlighter-rouge">create</code>와 동일하지만 스프링 부트 서버를 종료할 때에도 테이블을 모두 삭제한다.</ul><li>개발 환경에서는 보통 <code class="language-plaintext highlighter-rouge">update</code> 모드를 사용하고, 운영 환경에서는 <code class="language-plaintext highlighter-rouge">none</code> 또는 <code class="language-plaintext highlighter-rouge">validate</code>를 주로 사용한다.</ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><p><br /></p><h2 id="엔티티-entity"><span class="me-2">엔티티 (Entity)</span><a href="#엔티티-entity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>엔티티는 데이터베이스 테이블과 매핑되는 자바 클래스<li>엔티티를 모델 또는 도메인 모델이라고도 한다.<li>엔티티의 속성은 테이블의 열과 매핑이 된다.<ul><li><p>질문 엔티티</p><div class="table-wrapper"><table><thead><tr><th>속성 이름<th>설명<tbody><tr><td>id<td>질문 데이터의 고유 번호<tr><td>subject<td>질문 데이터의 제목<tr><td>content<td>질문 데이터의 내용<tr><td>createDate<td>질문 데이터를 작성한 일시</table></div><li><p>답변 엔티티</p><div class="table-wrapper"><table><thead><tr><th>속성 이름<th>설명<tbody><tr><td>id<td>답변 데이터의 고유 번호<tr><td>question<td>질문 데이터 (어떤 질문의 답변인지 알아야 하므로 이 속성이 필요하다.)<tr><td>content<td>답변 데이터의 내용<tr><td>createDate<td>답변 데이터를 작성한 일시</table></div></ul><li><p>엔티티 만드는 방법</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre>  <span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">jakarta.persistence.Column</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">jakarta.persistence.Entity</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">jakarta.persistence.GeneratedValue</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">jakarta.persistence.GenerationType</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">jakarta.persistence.Id</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.Getter</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Setter</span><span class="o">;</span>
    
  <span class="nd">@Getter</span>
  <span class="nd">@Setter</span>
  <span class="nd">@Entity</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Question</span> <span class="o">{</span>
      <span class="nd">@Id</span>
      <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
    
      <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">200</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">subject</span><span class="o">;</span>
    
      <span class="nd">@Column</span><span class="o">(</span><span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"TEXT"</span><span class="o">)</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    
      <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createDate</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><strong><code class="language-plaintext highlighter-rouge">@Entity</code></strong><ul><li><code class="language-plaintext highlighter-rouge">@Entity</code> 애너테이션을 적용해야 스프링 부트가 클래스를 엔티티로 인식</ul></ul><p><br /></p><ul><li>롬복(Lombok)의 <strong><code class="language-plaintext highlighter-rouge">@Getter</code></strong>와 <strong><code class="language-plaintext highlighter-rouge">@Setter</code></strong> 애너테이션을 적용<ul><li>Getter와 Setter를 자동 생성</ul></ul><p><br /></p><ul><li><strong><code class="language-plaintext highlighter-rouge">@Id</code></strong><ul><li><span class="blue">id 속성</span>에 적용한 <code class="language-plaintext highlighter-rouge">@Id</code> 애너테이션은 <span class="blue">id 속성</span>을 <span class="red">기본키</span>로 지정한다.</ul></ul><p><br /></p><ul><li><strong><code class="language-plaintext highlighter-rouge">@GeneratedValue</code></strong><ul><li><code class="language-plaintext highlighter-rouge">@GeneratedValue</code> 애너테이션을 적용하면 <span class="pink">데이터를 저장</span>할 때 해당 속성에 값을 일일이 입력하지 않아도 <span class="red">자동으로 1씩 증가</span>하여 저장<li><code class="language-plaintext highlighter-rouge">strategy = GenerationType.IDENTITY</code><ul><li>고유한 번호를 생성하는 방법을 지정하는 부분<ul><li><strong><code class="language-plaintext highlighter-rouge">GenerationType.IDENTITY</code></strong>는 <span class="red">해당 속성만 별도로</span> 번호가 차례대로 늘어나도록 할 때 사용</ul></ul><li><p><span class="red line">strategy 옵션을 생략한다면</span> <code class="language-plaintext highlighter-rouge">@GeneratedValue</code> 애너테이션이 <span class="blue">지정된 모든 속성에 번호를 차례로 생성</span>하므로 순서가 일정한 고유 번호를 가질 수 없게 된다.</p><p>(생략 시 1, 2, 3 이렇게 증가하는 것은 맞으나 아닐 수도 있다는 것)</p></ul></ul><p><br /></p><ul><li><strong><code class="language-plaintext highlighter-rouge">@Column</code></strong><ul><li>엔티티의 속성은 테이블의 열 이름과 일치하는데 <span class="blueline">열의 세부 설정을 위해</span> <code class="language-plaintext highlighter-rouge">@Column</code> 애너테이션을 사용한다.<li><code class="language-plaintext highlighter-rouge">length</code><ul><li><span class="blue">열의 길이를 설정할 때 사용</span>하고   (여기서는 열의 길이를 200으로 정함)</ul><li><code class="language-plaintext highlighter-rouge">columnDefinition</code><ul><li><span class="blue">열 데이터의 유형이나 성격을 정의할 때 사용</span>한다.<li><code class="language-plaintext highlighter-rouge">columnDefinition = "TEXT"</code>는 말 그대로 ‘텍스트’를 열 데이터로 넣을 수 있음을 의미하고, <span class="greenback">글자 수를 제한할 수 없는 경우에 사용</span></ul><li>엔티티의 속성은 <code class="language-plaintext highlighter-rouge">@Column</code> 애너테이션을 <span class="green">사용하지 않더라도</span> 테이블의 <span class="red">열로 인식</span>한다.<li>테이블의 <span class="blue">열로 인식하고 싶지 않다면</span> <code class="language-plaintext highlighter-rouge">@Transient</code> 애너테이션을 사용한다. <code class="language-plaintext highlighter-rouge">@Transient</code> 애너테이션은 엔티티의 속성을 테이블의 열로 만들지 않고 <span class="purple">클래스의 속성 기능으로만 사용하고자 할 때</span> 쓴다.</ul></ul><p><br /></p><ul><li>엔티티를 만들 때 <span class="red">Setter 메서드는 사용하지 않는다</span><ul><li><p>일반적으로 엔티티를 만들 때에는 Setter 메서드를 사용하지 않기를 권한다.</p><p>왜냐하면 엔티티는 <span class="blue">데이터베이스와 바로 연결되므로</span> 데이터를 자유롭게 변경할 수 있는 Setter 메서드를 허용하는 것이 안전하지 않다고 판단하기 때문</p><li><p><span class="red">엔티티</span>는 <span class="blue">생성자에 의해서만 엔티티의 값을 저장</span>할 수 있게 하고, <span class="back">데이터를 변경해야 할 경우</span>에는 <span class="pink">메서드를 추가로 작성</span>하면 된다.</p></ul></ul></ul><p><br /> <br /> <br /></p><h3 id="답변-엔티티"><span class="me-2">답변 엔티티</span><a href="#답변-엔티티" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.mysite.myapp</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">jakarta.persistence.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Getter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Setter</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Answer</span> <span class="o">{</span>
  <span class="nd">@Id</span>
  <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>

  <span class="nd">@Column</span><span class="o">(</span><span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"TEXT"</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>

  <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createDate</span><span class="o">;</span>

  <span class="nd">@ManyToOne</span>
  <span class="kd">private</span> <span class="nc">Question</span> <span class="n">question</span><span class="o">;</span>
<span class="o">}</span>

</pre></table></code></div></div><ul><li>답변 엔티티의 경우<ul><li><span class="red">질문 엔티티</span>를 참조하기 위해 <code class="language-plaintext highlighter-rouge">question</code> 속성을 추가한다.<li>그러나 <span class="red">엔티티</span>를 <span class="blue">속성으로 사용하기 위해서</span>는 <span class="back">연결된 속성임을 표시</span>해야 한다.<ul><li><p><code class="language-plaintext highlighter-rouge">@ManyToOne</code> 애너테이션</p><p><span class="purple">현재 Entity가 많은 것</span>이고 <span class="pink">참조 Entity가 하나</span>라는 뜻이다.</p><p>⇒   실제 DB에서는 <span class="greenback">외래키(FK) 관계</span> 생성</p><p>⇒   부모는 <code class="language-plaintext highlighter-rouge">Question</code>, 자식은 <code class="language-plaintext highlighter-rouge">Answer</code></p></ul></ul></ul><p><br /></p><ul><li><p><span class="blue">질문 Entity</span>의 <span class="red line">답변 Entity 역참조</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.mysite.myapp</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">jakarta.persistence.*</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">lombok.Getter</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Setter</span><span class="o">;</span>
    
  <span class="nd">@Getter</span>
  <span class="nd">@Setter</span>
  <span class="nd">@Entity</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Question</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
    
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">200</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">subject</span><span class="o">;</span>
    
    <span class="nd">@Column</span><span class="o">(</span><span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"TEXT"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createDate</span><span class="o">;</span>
    
    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"question"</span><span class="o">,</span> <span class="n">cascade</span> <span class="o">=</span> <span class="nc">CascadeType</span><span class="o">.</span><span class="na">REMOVE</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Answer</span><span class="o">&gt;</span> <span class="n">answerList</span><span class="o">;</span>
  <span class="o">}</span>
    
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">answerList</code>를 <code class="language-plaintext highlighter-rouge">Question</code> 엔티티의 속성으로 추가하고 <code class="language-plaintext highlighter-rouge">@OneToMany</code> 애너테이션을 설정<ul><li>이제 <span class="red">질문</span>에서 <span class="blue">답변</span>을 참조하려면 <code class="language-plaintext highlighter-rouge">question.getAnswerList()</code>를 호출<li><p><code class="language-plaintext highlighter-rouge">mappedBy</code>는 <span class="blue">참조 엔티티</span>의 <span class="blueline">속성명</span>을 정의</p><p><code class="language-plaintext highlighter-rouge">Answer</code> 엔티티에서 <code class="language-plaintext highlighter-rouge">Question</code> 엔티티를 참조한 속성인 <code class="language-plaintext highlighter-rouge">question</code>을 <code class="language-plaintext highlighter-rouge">mappedBy</code>에 전달해야 한다.</p><p><span class="back">즉, <code class="language-plaintext highlighter-rouge">Answer</code> 엔티티에서 어떻게 정의했는지 알려주는 것</span></p></ul></ul><p><br /></p><ul><li><strong><code class="language-plaintext highlighter-rouge">CascadeType.REMOVE</code></strong><ul><li>질문 하나에 답변이 여러 개 작성될 수 있다. <span class="purple">보통 게시판에서는 질문을 삭제하면 그에 달린 답변들도 함께 삭제된다</span><li><code class="language-plaintext highlighter-rouge">cascade = CascadeType.REMOVE</code>를 사용하여 구현</ul></ul></ul><p><br /> <br /></p><ul><li><p><strong>H2 데이터베이스 결과</strong></p><p><a href="/assets/img/posts/springboot-jpa/image.png" class="popup img-link left shimmer"><img src="/assets/img/posts/springboot-jpa/image.png" alt="" width="200" height="100" loading="lazy"></a></p><div class="clear"></div><ul><li><span class="greenback">JPA</span>에서 <strong><code class="language-plaintext highlighter-rouge">@OneToMany</code></strong>와 같은 <span class="red">컬렉션 필드</span>는 데이터베이스 <span class="blue">테이블</span>에 <span class="blueline">직접 저장되지 않는다</span>.<ul><li><span class="back">단순히 데이터베이스 테이블 간의 관계를 나타내기 위한 매핑</span></ul></ul></ul><p><br /> <br /> <br /> <br /></p><h2 id="리포지터리"><span class="me-2"><strong>리포지터리</strong></span><a href="#리포지터리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><span class="purple">엔티티</span>가 데이터베이스 테이블을 생성했다면, <span class="pink">리포지터리</span>는 이와 같이 생성된 데이터베이스 테이블의 데이터들을 <span class="line">저장, 조회, 수정, 삭제 등</span>을 할 수 있도록 도와주는 <span class="red line">인터페이스</span></ul><p><br /></p><ul><li><span class="pink">리포지터리</span>로 만들기 위해 <strong><code class="language-plaintext highlighter-rouge">JpaRepository</code></strong> 인터페이스를 <span class="red back">상속</span>한다.<ul><li><strong><code class="language-plaintext highlighter-rouge">JpaRepository</code></strong><ul><li><span class="greenback">JPA</span>가 제공하는 인터페이스 중 하나<li><span class="back">CRUD 작업을 처리하는 메서드들</span>을 <span class="red line">이미 내장</span>하고 있다<li><strong><code class="language-plaintext highlighter-rouge">JpaRepository&lt;Question, Integer&gt;</code></strong>는 <span class="back">Question 엔티티</span>로 리포지터리를 생성한다는 의미<li>Question 엔티티의 <span class="greenback">기본키</span>의 타입을 <strong><code class="language-plaintext highlighter-rouge">Integer</code></strong> 처럼 <span class="red line">추가로 지정해야 한다</span>.</ul></ul></ul><p><br /> <br /> <br /> <br /></p><h2 id="junit"><span class="me-2">JUnit</span><a href="#junit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><span class="pink">리포지터리</span>를 이용하여 <span class="green">데이터를 저장</span>하려면 프론트단과 컨트롤러, 서비스 등이 필요하다.</p><p>⇒   하지만 <span class="pink">JUnit</span>을 사용하면 <span class="red">리포지터리만 개별적으로 실행해 테스트가 가능하다</span></p></ul><p><br /></p><ul><li><span class="blue">JUnit</span>은 자바의 테스트 프레임워크<li><span class="pink">리포지터리</span>뿐만 아니라 소프트웨어 개발 시 테스트 작업을 수행할 때 많이 사용한다.<li><p><strong><code class="language-plaintext highlighter-rouge">build.gradle</code></strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>      <span class="n">testImplementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">jupiter</span><span class="o">:</span><span class="n">junit</span><span class="o">-</span><span class="n">jupiter</span><span class="err">'</span> 
      <span class="n">testRuntimeOnly</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">platform</span><span class="o">:</span><span class="n">junit</span><span class="o">-</span><span class="n">platform</span><span class="o">-</span><span class="n">launcher</span><span class="err">'</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">testRuntimeOnly</code>   :   해당 라이브러리가 테스트 실행 시에만 사용됨</ul></ul><p><br /></p><ul><li><p><code class="language-plaintext highlighter-rouge">src/test/java</code>의 <strong><code class="language-plaintext highlighter-rouge">MyappApplicationTests</code></strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.mysite.myapp</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
    
  <span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>
    
  <span class="nd">@SpringBootTest</span>
  <span class="kd">class</span> <span class="nc">MyappApplicationTests</span> <span class="o">{</span>
    
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">QuestionRepository</span> <span class="n">questionRepository</span><span class="o">;</span>
    
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">Question</span> <span class="n">q1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Question</span><span class="o">();</span>
      <span class="n">q1</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="s">"sbb가 무엇인가요?"</span><span class="o">);</span>
      <span class="n">q1</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="s">"sbb에 대해서 알고 싶습니다."</span><span class="o">);</span>
      <span class="n">q1</span><span class="o">.</span><span class="na">setCreateDate</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
      <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">q1</span><span class="o">);</span>  <span class="c1">// 첫번째 질문 저장</span>
    
      <span class="nc">Question</span> <span class="n">q2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Question</span><span class="o">();</span>
      <span class="n">q2</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="s">"스프링부트 모델 질문입니다."</span><span class="o">);</span>
      <span class="n">q2</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="s">"id는 자동으로 생성되나요?"</span><span class="o">);</span>
      <span class="n">q2</span><span class="o">.</span><span class="na">setCreateDate</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
      <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">q2</span><span class="o">);</span>  <span class="c1">// 두번째 질문 저장</span>
    <span class="o">}</span>
  <span class="o">}</span>
    
</pre></table></code></div></div><ul><li>테스트를 진행할 <span class="purple">리포지토리</span>를 <span class="red">의존성으로 주입</span>하여 테스트한다.<li><strong><code class="language-plaintext highlighter-rouge">@Autowired</code></strong><ul><li><code class="language-plaintext highlighter-rouge">@Autowired</code> 애너테이션을 해당 변수에 적용하면 <span class="red">스프링 부트</span>가 <code class="language-plaintext highlighter-rouge">questionRepository</code> 객체를 자동으로 만들어 주입해준다.<li>개발 시 <code class="language-plaintext highlighter-rouge">@Autowired</code>보다는 <span class="back">생성자를 통한 객체 주입 방식을 권장</span></ul></ul><p><br /></p><ul><li><strong><code class="language-plaintext highlighter-rouge">@Test</code></strong><ul><li><code class="language-plaintext highlighter-rouge">@Test</code> 애너테이션은 해당 메서드가 <span class="pink">테스트 메서드임</span>을 나타낸다.<li>클래스를 <span class="blue">JUnit</span>으로 실행하면 <code class="language-plaintext highlighter-rouge">@Test</code> 애너테이션이 붙은 <code class="language-plaintext highlighter-rouge">testJpa</code> 메서드가 실행된다.</ul></ul></ul><p><br /> <br /></p><ul><li><p><strong>SELECT (목록)</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">all</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">all</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    
      <span class="nc">Question</span> <span class="n">q</span> <span class="o">=</span> <span class="n">all</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="s">"sbb가 무엇인가요?"</span><span class="o">,</span> <span class="n">q</span><span class="o">.</span><span class="na">getSubject</span><span class="o">());</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">findAll()</code>는 H2 콘솔에서 입력해 본 <code class="language-plaintext highlighter-rouge">SELECT * FROM QUESTION</code>과 같은 결과<li><strong><code class="language-plaintext highlighter-rouge">assertEquals(기댓값, 실젯값)</code></strong><ul><li>JPA 또는 데이터베이스에서 <span class="pink">데이터를 올바르게 가져오는지를 확인</span>하려는 것</ul></ul></ul><p><br /> <br /></p><ul><li><p><strong>SELECT (조회)</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">oq</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">oq</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
          <span class="nc">Question</span> <span class="n">q</span> <span class="o">=</span> <span class="n">oq</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
          <span class="n">assertEquals</span><span class="o">(</span><span class="s">"sbb가 무엇인가요?"</span><span class="o">,</span> <span class="n">q</span><span class="o">.</span><span class="na">getSubject</span><span class="o">());</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">findById</code> 메서드   <span class="red line">(내장)</span><ul><li><span class="red back">리턴 타입</span>   :   <strong><code class="language-plaintext highlighter-rouge">Optional</code></strong><li>가져오는 것이 null 일 수도 있기 때문에 사용<li><code class="language-plaintext highlighter-rouge">Optional</code> 클래스는 <span class="blue">null 값을 유연하게 처리하기 위하여</span> 사용<li>해당 클래스의 <code class="language-plaintext highlighter-rouge">isPresent()</code>로 값이 존재하는지 확인할 수 있다<li><span class="purple">존재한다면</span>, <code class="language-plaintext highlighter-rouge">get()</code>으로 실제 값을 가져온다.</ul></ul><p><br /></p><ul><li><p><code class="language-plaintext highlighter-rouge">findBySubject</code> 메서드   <span class="red line">(내장 X)</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>  <span class="kn">package</span> <span class="nn">com.mysite.myapp</span><span class="o">;</span>
        
  <span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
        
  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">QuestionRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="o">{</span>
        
    <span class="nc">Question</span> <span class="nf">findBySubject</span><span class="o">(</span><span class="nc">String</span> <span class="n">subject</span><span class="o">);</span>
  <span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">Question</span> <span class="n">q</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findBySubject</span><span class="o">(</span><span class="s">"sbb가 무엇인가요?"</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">q</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><p>기본적으로 제공하는 메서드가 아니다.</p><p>⇒   Repository 인터페이스를 수정해야 한다</p><ul><li><span class="blue">JPA</span>에서 <span class="pink">Repository의 메서드명</span>을 분석하여 쿼리를 만들고 실행한다.<ul><li><code class="language-plaintext highlighter-rouge">findBy</code>   <code class="language-plaintext highlighter-rouge">+</code>   <code class="language-plaintext highlighter-rouge">엔티티의 속성명</code></ul></ul><li><p><span class="path">application.properties</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="err">#</span> <span class="no">JPA</span>
  <span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">properties</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">dialect</span><span class="o">=</span><span class="n">org</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">dialect</span><span class="o">.</span><span class="na">H2Dialect</span>
  <span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">ddl</span><span class="o">-</span><span class="n">auto</span><span class="o">=</span><span class="n">update</span>
  <span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">properties</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">format_sql</span><span class="o">=</span><span class="kc">true</span>
  <span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">properties</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">show_sql</span><span class="o">=</span><span class="kc">true</span>
</pre></table></code></div></div><ul><li>실제 데이터베이스에서는 <span class="green">어떤 쿼리문이 실행되는지</span> <span class="blue">Console 로그에서 확인하는 방법</span>이다.</ul></ul></ul><p><br /></p><ul><li><p><code class="language-plaintext highlighter-rouge">findBySubjectAndContent</code> 메서드   <span class="red line">(내장 X)</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>  <span class="nd">@Repository</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">QuestionRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="o">{</span>
        
    <span class="nc">Question</span> <span class="nf">findBySubject</span><span class="o">(</span><span class="nc">String</span> <span class="n">subject</span><span class="o">);</span>
    <span class="nc">Question</span> <span class="nf">findBySubjectAndContent</span><span class="o">(</span><span class="nc">String</span> <span class="n">subject</span><span class="o">,</span> <span class="nc">String</span> <span class="n">content</span><span class="o">);</span>
  <span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">Question</span> <span class="n">q</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findBySubjectAndContent</span><span class="o">(</span>
              <span class="s">"sbb가 무엇인가요?"</span><span class="o">,</span> <span class="s">"sbb에 대해서 알고 싶습니다."</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">q</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li>마찬가지로 기본적으로 제공하는 메서드가 아니다.<ul><li>SQL문의 <code class="language-plaintext highlighter-rouge">And</code>를 <span class="purple">메서드명에 추가</span>하여 만들 수 있다.</ul></ul></ul></ul><p><br /></p><p><br /></p><ul><li><span class="purple bold">SQL 연산자</span>와 <span class="red bold">Repository의 메서드</span><ul><li><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html">https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html</a><li><strong>And</strong><ul><li><code class="language-plaintext highlighter-rouge">findBySubjectAndContent(String subject, String content)</code></ul><li><strong>Or</strong><ul><li><code class="language-plaintext highlighter-rouge">findBySubjectOrContent(String subject, String content)</code></ul><li><strong>Between</strong><ul><li><code class="language-plaintext highlighter-rouge">findByCreateDateBetween(LocalDateTime fromDate, LocalDateTime toDate)</code></ul><li><strong>LessThan (작은)</strong><ul><li><code class="language-plaintext highlighter-rouge">findByIdLessThan(Integer id)</code></ul><li><strong>GreaterThanEqual (크거나 같은)</strong><ul><li><code class="language-plaintext highlighter-rouge">findByIdGreaterThanEqual(Integer id)</code></ul><li><strong>Like</strong><ul><li><code class="language-plaintext highlighter-rouge">findBySubjectLike(String subject)</code></ul><li><strong>In (주어진 배열에 포함되는 애들만)</strong><ul><li><code class="language-plaintext highlighter-rouge">findBySubjectIn(String[] subjects)</code></ul><li><strong>OrderBy</strong><ul><li><code class="language-plaintext highlighter-rouge">findBySubjectOrderByCreateDateAsc(String subject)</code></ul></ul></ul><p><br /></p><p><br /></p><ul><li><p><strong><code class="language-plaintext highlighter-rouge">findBySubjectLike(String subject)</code></strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">QuestionRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="nc">Question</span> <span class="nf">findBySubject</span><span class="o">(</span><span class="nc">String</span> <span class="n">subject</span><span class="o">);</span>
      <span class="nc">Question</span> <span class="nf">findBySubjectAndContent</span><span class="o">(</span><span class="nc">String</span> <span class="n">subject</span><span class="o">,</span> <span class="nc">String</span> <span class="n">content</span><span class="o">);</span>
      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="nf">findBySubjectLike</span><span class="o">(</span><span class="nc">String</span> <span class="n">subject</span><span class="o">);</span>
  <span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">qList</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findBySubjectLike</span><span class="o">(</span><span class="s">"sbb%"</span><span class="o">);</span>
      <span class="nc">Question</span> <span class="n">q</span> <span class="o">=</span> <span class="n">qList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="s">"sbb가 무엇인가요?"</span><span class="o">,</span> <span class="n">q</span><span class="o">.</span><span class="na">getSubject</span><span class="o">());</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">sbb%</code>   :   ‘sbb’로 시작하는 문자열<li><code class="language-plaintext highlighter-rouge">%sbb</code>   :   ‘sbb’로 끝나는 문자열<li><code class="language-plaintext highlighter-rouge">%sbb%</code>   :   ‘sbb’를 포함하는 문자열</ul></ul><p><br /></p><p><br /></p><ul><li><code class="language-plaintext highlighter-rouge">assertTrue()</code><ul><li>파라미터로 받은 값이 <span class="red">true인지 테스트</span>하는 것.</ul></ul><p><br /></p><ul><li><code class="language-plaintext highlighter-rouge">Repository.count()</code><ul><li><span class="blue">테이블 행의 전체 개수</span>를 반환</ul></ul><p><br /></p><p><br /></p><h3 id="답변-데이터를-통해-질문-데이터-찾기-vs-질문-데이터를-통해-답변-데이터-찾기"><span class="me-2"><strong>답변 데이터를 통해 질문 데이터 찾기 vs 질문 데이터를 통해 답변 데이터 찾기</strong></span><a href="#답변-데이터를-통해-질문-데이터-찾기-vs-질문-데이터를-통해-답변-데이터-찾기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><code class="language-plaintext highlighter-rouge">a.getQuestion()</code><ul><li>a는 답변 객체</ul></ul><p><br /></p><ul><li><p>반대의 경우,</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testJpa</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">oq</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
      <span class="n">assertTrue</span><span class="o">(</span><span class="n">oq</span><span class="o">.</span><span class="na">isPresent</span><span class="o">());</span>
      <span class="nc">Question</span> <span class="n">q</span> <span class="o">=</span> <span class="n">oq</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
    
      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Answer</span><span class="o">&gt;</span> <span class="n">answerList</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">getAnswerList</span><span class="o">();</span>
    
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">answerList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="s">"네 자동으로 생성됩니다."</span><span class="o">,</span> <span class="n">answerList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getContent</span><span class="o">());</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><span class="error">오류 발생</span><ul><li><p>먼저 Id가 2인 질문을 조회하고 이후에 해당 질문의 답변을 가져온다.</p><p>그러나, <span class="blue">Id로 질문을 가져오고 나서</span> <span class="red line">DB 세션이 끊어지기 때문</span>에 오류가 발생한다.</p><li><span class="greenback">DB 세션</span><ul><li><span class="line">스피링부트 애플리케이션과 데이터베이스 간의 연결</span></ul><li><span class="back">이렇게 데이터를 필요한 시점에 가져오는 방식</span>을 <span class="red back">지연(Lazy) 방식</span>이라 한다.<li>반대로 <span class="blue">조회할 때 미리 answer 리스트를 모두 가져오는 방식</span>은 <span class="red back">즉시(Eager) 방식</span>이라 한다.<li><code class="language-plaintext highlighter-rouge">@OneToMany</code>, <code class="language-plaintext highlighter-rouge">@ManyToOne</code> 애너테이션의 옵션으로 <strong><code class="language-plaintext highlighter-rouge">fetch=FetchType.LAZY</code></strong> 또는 <strong><code class="language-plaintext highlighter-rouge">fetch=FetchType.EAGER</code></strong>처럼 <span class="pink">가져오는 방식</span>을 <span class="pink">설정</span>할 수 있다.<li><span class="back">실제로 JPA 프로그램을 실행 시 DB 세션은 종료되지 않기 때문에 오류가 발생하지 않는다.</span><li>테스트 코드에서는 <code class="language-plaintext highlighter-rouge">@Transactional</code> 애너테이션으로 유지할 수 있다.</ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><p><br /></p><h2 id="서비스-service"><span class="me-2">서비스 (Service)</span><a href="#서비스-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>서비스가 <span class="red bold">필요한 이유</span><ul><li><strong><code class="language-plaintext highlighter-rouge">Service</code></strong>는 스프링에서 <span class="purple">데이터 처리를 위해 작성하는 클래스</span><li>복잡한 코드를 <span class="pink">모듈화</span>할 수 있다<li><span class="blue">Entity 객체</span>를 <span class="pink">DTO 객체</span>로 변환할 수 있다.<ul><li>왜냐하면 엔티티 객체에는 민감한 데이터가 포함될 수 있는데 민감한 데이터가 노출될 위험이 있기 때문</ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><p><br /></p><h2 id="thymeleaf"><span class="me-2">Thymeleaf</span><a href="#thymeleaf" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><span class="path">questoin_list.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">thead</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">제목</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">작성일시</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
          <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">thead</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">tbody</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">tr</span> <span class="nl">th:</span><span class="n">each</span><span class="o">=</span><span class="s">"question : ${questionList}"</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">td</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.subject}"</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">td</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.createDate}"</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
          <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">tbody</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><strong><code class="language-plaintext highlighter-rouge">th:</code></strong>는 타임리프에서 사용하는 속성임을 나타낸다.<li><code class="language-plaintext highlighter-rouge">&lt;tr th:each="question : ${questionList}"&gt;</code><ul><li><p><code class="language-plaintext highlighter-rouge">QuestionController</code>의 <span class="pink">list 메서드</span>에서 조회한 질문 목록 데이터를 <code class="language-plaintext highlighter-rouge">‘questionList’</code>라는 이름으로 <span class="red line">Model 객체</span>에 저장</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/question/list"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">list</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">questionList</span> <span class="o">=</span> <span class="n">questionService</span><span class="o">.</span><span class="na">getQuestionList</span><span class="o">();</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"questionList"</span><span class="o">,</span> <span class="n">questionList</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">"domain/question/question_list"</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><li>타임리프는 <span class="back">Model 객체에 저장한 questionList</span>를 <strong><code class="language-plaintext highlighter-rouge">${questionList}</code></strong>로 읽을 수 있다<li><code class="language-plaintext highlighter-rouge">&lt;td th:text="${question.subject}"&gt;&lt;/td&gt;</code></ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="thymeleaf-문법"><span class="me-2">Thymeleaf 문법</span><a href="#thymeleaf-문법" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>분기문 (if 등)</strong><ul><li><strong><code class="language-plaintext highlighter-rouge">th:if="${question != null}”</code></strong></ul></ul><p><br /></p><ul><li><strong>반복문 (for 등)</strong><ul><li><strong><code class="language-plaintext highlighter-rouge">th:each="question : ${questionList}”</code></strong><li><p><strong><code class="language-plaintext highlighter-rouge">th:each="question, loop : ${questionList}”</code></strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  <span class="n">loop</span><span class="o">.</span><span class="na">index</span><span class="o">:</span> <span class="n">루프의</span> <span class="n">순서</span><span class="o">(</span><span class="n">루프의</span> <span class="n">반복</span> <span class="n">순서</span><span class="o">,</span> <span class="mi">0</span><span class="n">부터</span> <span class="mi">1</span><span class="n">씩</span> <span class="n">증가</span><span class="o">)</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">count</span><span class="o">:</span> <span class="n">루프의</span> <span class="n">순서</span><span class="o">(</span><span class="n">루프의</span> <span class="n">반복</span> <span class="n">순서</span><span class="o">,</span> <span class="mi">1</span><span class="n">부터</span> <span class="mi">1</span><span class="n">씩</span> <span class="n">증가</span><span class="o">)</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">size</span><span class="o">:</span> <span class="n">반복</span> <span class="n">객체의</span> <span class="n">요소</span> <span class="n">개수</span><span class="o">(</span><span class="n">예를</span> <span class="n">들어</span> <span class="n">questionList의</span> <span class="n">요소</span> <span class="n">개수</span><span class="o">)</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">first</span><span class="o">:</span> <span class="n">루프의</span> <span class="n">첫</span> <span class="n">번째</span> <span class="n">순서인</span> <span class="n">경우</span> <span class="kc">true</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">last</span><span class="o">:</span> <span class="n">루프의</span> <span class="n">마지막</span> <span class="n">순서인</span> <span class="n">경우</span> <span class="kc">true</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">odd</span><span class="o">:</span> <span class="n">루프의</span> <span class="n">홀수</span> <span class="n">번째</span> <span class="n">순서인</span> <span class="n">경우</span> <span class="kc">true</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">even</span><span class="o">:</span> <span class="n">루프의</span> <span class="n">짝수</span> <span class="n">번째</span> <span class="n">순서인</span> <span class="n">경우</span> <span class="kc">true</span>
  <span class="n">loop</span><span class="o">.</span><span class="na">current</span><span class="o">:</span> <span class="n">현재</span> <span class="n">대입된</span> <span class="n">객체</span><span class="o">(</span><span class="n">여기서는</span> <span class="n">question과</span> <span class="n">동일</span><span class="o">)</span>
</pre></table></code></div></div></ul></ul><p><br /></p><ul><li><strong>텍스트</strong><ul><li><strong><code class="language-plaintext highlighter-rouge">th:text="${question.subject}”</code></strong><li><p>텍스트는 <code class="language-plaintext highlighter-rouge">th:text</code> 속성 대신에 다음처럼 <span class="back">대괄호를 사용하여 값을 직접 출력</span>할 수 있다</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">tr</span> <span class="nl">th:</span><span class="n">each</span><span class="o">=</span><span class="s">"question : ${questionList}"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;[[</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">subject</span><span class="o">}]]&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;[[</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">createDate</span><span class="o">}]]&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
</pre></table></code></div></div></ul></ul><p><br /></p><p><br /></p><h3 id="링크-"><span class="me-2">링크 <span class="red">★</span></span><a href="#링크-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre>```java
&lt;table&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;제목&lt;/th&gt;
        &lt;th&gt;작성일시&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    &lt;tr th:each="question : ${questionList}"&gt;
        &lt;td th:text="${question.subject}"&gt;&lt;/td&gt;
        &lt;td th:text="${question.createDate}"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
```

```java
&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;제목&lt;/th&gt;
            &lt;th&gt;작성일시&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr th:each="question, index : ${questionList}"&gt;
            &lt;td&gt;
                &lt;a th:href="@{|/question/detail/${question.id}|}" th:text="${question.subject}"&gt;&lt;/a&gt;
            &lt;/td&gt;
            &lt;td th:text="${question.createDate}"&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
```

- 링크의 URL은 &lt;span class="back"&gt;반드시 `@{`와 `}` 문자 사이에 입력&lt;/span&gt;해야 한다
- &lt;span class="red line"&gt;좌우에 `|` 없이 다음과 같이 사용하면 오류&lt;/span&gt;
    
    타임리프에서는 `/question/detail/`과 같은 문자열과 `${question.id}`와 같은 자바 객체의 값을 더할 때는 반드시 다음처럼 `|`로 좌우를 감싸 주어야 한다
    
    `&lt;a th:href="@{|/question/detail/${question.id}|}" th:text="${question.subject}"&gt;&lt;/a&gt;`
</pre></table></code></div></div><p><br /></p><ul><li><p>상세 페이지 예시</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">h1</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.subject}"</span><span class="o">&gt;&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.content}"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div></ul><p><br /></p><p><br /></p><p><br /></p><p><br /></p><h3 id="상세-페이지-만들기"><span class="me-2">상세 페이지 만들기</span><a href="#상세-페이지-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuestionService</span> <span class="o">{</span>

    <span class="o">(...</span> <span class="n">생략</span> <span class="o">...)</span>

    <span class="kd">public</span> <span class="nc">Question</span> <span class="nf">getQuestion</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">question</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">questionRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">question</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">DataNotFoundException</span><span class="o">(</span><span class="s">"question not found"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li><p><span class="path">DataNotFoundException.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>  <span class="kn">import</span> <span class="nn">org.springframework.http.HttpStatus</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseStatus</span><span class="o">;</span>
    
  <span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">,</span> <span class="n">reason</span> <span class="o">=</span> <span class="s">"entity not found"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataNotFoundException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
      <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
      <span class="kd">public</span> <span class="nf">DataNotFoundException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><span class="purple">특정 엔티티 또는 데이터</span>를 <span class="red">찾을 수 없을 때 발생</span>시키는 예외 클래스<li>이 예외가 발생하면 <span class="blue">스프링 부트</span>는 설정된 HTTP 상태 코드(<code class="language-plaintext highlighter-rouge">HttpStatus.NOT_FOUND</code>)와 이유(<code class="language-plaintext highlighter-rouge">"entity not found"</code>)를 포함한 응답을 생성하여 <span class="pink">클라이언트</span>에게 반환<ul><li><span class="greenback">404 오류(NOT_FOUND)</span>를 반환<li><code class="language-plaintext highlighter-rouge">RuntimeException</code> 클래스를 상속하는 것은 사용자 정의 예외 클래스를 정의하는 방법 중 하나</ul><li><strong><code class="language-plaintext highlighter-rouge">@ResponseStatus</code></strong><ul><li><span class="back">컨트롤러에서 던져진 예외를 처리하면서 HTTP 응답 상태 코드를 지정하는 데 사용</span><li><code class="language-plaintext highlighter-rouge">value</code> 속성   :   반환할 <span class="pink">HTTP 상태 코드</span>를 설정<li><code class="language-plaintext highlighter-rouge">reason</code> 속성   :   응답에 <span class="purple">포함될 메시지</span>를 설정</ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="입력-폼-만들기"><span class="me-2">입력 폼 만들기</span><a href="#입력-폼-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">h1</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.subject}"</span><span class="o">&gt;&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.content}"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">form</span> <span class="nl">th:</span><span class="n">action</span><span class="o">=</span><span class="s">"@{|/answer/create/${question.id}|}"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">textarea</span> <span class="n">name</span><span class="o">=</span><span class="s">"content"</span> <span class="n">id</span><span class="o">=</span><span class="s">"content"</span> <span class="n">rows</span><span class="o">=</span><span class="s">"15"</span><span class="o">&gt;&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"답변등록"</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><strong><code class="language-plaintext highlighter-rouge">&lt;form th:action="@{|/answer/create/${question.id}|}" method="post"&gt;</code></strong><ul><li>해당 URL로 <span class="blue">POST 요청</span>을 보내는 것<li><span class="purple">submit 버튼</span> 생성</ul></ul><p><br /></p><p><br /></p><ul><li><p><span class="path">AnswerController, AnswerService</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>  <span class="nd">@Controller</span>
  <span class="nd">@RequiredArgsConstructor</span>
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/answer"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnswerController</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">QuestionService</span> <span class="n">questionService</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AnswerService</span> <span class="n">answerService</span><span class="o">;</span>
    
    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"create/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">createAnswer</span><span class="o">(</span>
        <span class="nd">@PathVariable</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">,</span>
        <span class="nd">@RequestParam</span> <span class="nc">String</span> <span class="n">content</span><span class="o">,</span>
        <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="nc">Question</span> <span class="n">question</span> <span class="o">=</span> <span class="n">questionService</span><span class="o">.</span><span class="na">getQuestion</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
      <span class="n">answerService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">question</span><span class="o">,</span> <span class="n">content</span><span class="o">);</span>
      <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"redirect:/question/detail/%s"</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
    
  <span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>  <span class="nd">@Service</span>
  <span class="nd">@RequiredArgsConstructor</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnswerService</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AnswerRepository</span> <span class="n">answerRepository</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">create</span><span class="o">(</span><span class="nc">Question</span> <span class="n">question</span><span class="o">,</span> <span class="nc">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Answer</span> <span class="n">answer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Answer</span><span class="o">();</span>
      <span class="n">answer</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
      <span class="n">answer</span><span class="o">.</span><span class="na">setCreateDate</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
      <span class="n">answer</span><span class="o">.</span><span class="na">setQuestion</span><span class="o">(</span><span class="n">question</span><span class="o">);</span>
      <span class="k">this</span><span class="o">.</span><span class="na">answerRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">answer</span><span class="o">);</span>
    <span class="o">}</span>
    
  <span class="o">}</span>
</pre></table></code></div></div></ul><p><br /></p><p><br /></p><ul><li>답변 표시 UI 수정<ul><li><p><span class="path">question_detail.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">h1</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.subject}"</span><span class="o">&gt;&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.content}"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        
  <span class="o">&lt;</span><span class="n">form</span> <span class="nl">th:</span><span class="n">action</span><span class="o">=</span><span class="s">"@{|/answer/create/${question.id}|}"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">textarea</span> <span class="n">name</span><span class="o">=</span><span class="s">"content"</span> <span class="n">id</span><span class="o">=</span><span class="s">"content"</span> <span class="n">rows</span><span class="o">=</span><span class="s">"15"</span><span class="o">&gt;&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"답변등록"</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
        
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">h1</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.subject}"</span><span class="o">&gt;&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${question.content}"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">h5</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"|${#lists.size(question.answerList)}개의 답변이 있습니다.|"</span><span class="o">&gt;&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">li</span> <span class="nl">th:</span><span class="n">each</span><span class="o">=</span><span class="s">"answer : ${question.answerList}"</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${answer.content}"</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">form</span> <span class="nl">th:</span><span class="n">action</span><span class="o">=</span><span class="s">"@{|/answer/create/${question.id}|}"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">textarea</span> <span class="n">name</span><span class="o">=</span><span class="s">"content"</span> <span class="n">id</span><span class="o">=</span><span class="s">"content"</span> <span class="n">rows</span><span class="o">=</span><span class="s">"15"</span><span class="o">&gt;&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"답변등록"</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><p>추가 부분 (1)</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">li</span> <span class="nl">th:</span><span class="n">each</span><span class="o">=</span><span class="s">"answer : ${question.answerList}"</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"${answer.content}"</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">th:each</code>로 반복문을 돌며 <code class="language-plaintext highlighter-rouge">answer</code>를 꺼내서 해당 값에서 <code class="language-plaintext highlighter-rouge">content</code>를 뽑아서 출력한다.</ul></ul><p><br /></p><ul><li><p>추가 부분 (2)</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">h5</span> <span class="nl">th:</span><span class="n">text</span><span class="o">=</span><span class="s">"|${#lists.size(question.answerList)}개의 답변이 있습니다.|"</span><span class="o">&gt;&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><strong><code class="language-plaintext highlighter-rouge">#lists.size(객체)</code></strong><ul><li><span class="back">타임리프에서 제공하는 기능</span>으로, 해당 객체의 길이를 반환 <span class="red">★</span></ul></ul></ul></ul></ul><p><br /></p><p><br /></p><h3 id="화면-꾸미기"><span class="me-2">화면 꾸미기</span><a href="#화면-꾸미기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><span class="path">/resources/static/style.css</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>  <span class="n">textarea</span> <span class="o">{</span>
      <span class="nl">width:</span><span class="mi">100</span><span class="o">%;</span>
  <span class="o">}</span>
    
  <span class="n">input</span><span class="o">[</span><span class="n">type</span><span class="o">=</span><span class="n">submit</span><span class="o">]</span> <span class="o">{</span>
      <span class="n">margin</span><span class="o">-</span><span class="nl">top:</span><span class="mi">10</span><span class="n">px</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div></ul><p><br /></p><ul><li><p><span class="path">question_detail.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/style.css}"</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><span class="green">스타일시트 파일</span>을 상세 페이지 템플릿에 적용<li><p><span class="purple">static 디렉터리</span>에 style.css 파일이 위치하지만 <code class="language-plaintext highlighter-rouge">/static/style.css</code> 대신 <code class="language-plaintext highlighter-rouge">/style.css</code>로 작성해야 한다.</p><p>⇒   왜냐하면 static 디렉터리가 루트 디렉터리이므로 <span class="red">적을 필요가 없기 때문</span></p></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="부트스트랩-활용하기"><span class="me-2">부트스트랩 활용하기</span><a href="#부트스트랩-활용하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>부트스트랩 다운로드<ol><li><a href="https://getbootstrap.com/docs/5.3/getting-started/download/">https://getbootstrap.com/docs/5.3/getting-started/download/</a><li><span class="pink">Compiled CSS and JS</span>의 Download<li><code class="language-plaintext highlighter-rouge">bootstrap.min.css</code> 파일을 복사하여 <span class="purple">스태틱 디렉터리</span>에 저장</ol></ul><p><br /></p><ul><li>기존의 Thymeleaf 템플릿에 <span class="blue">부트스트랩</span> 적용하기<ul><li><p><span class="path">question_list.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/bootstrap.min.css}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
      &lt;table class="</span><span class="n">table</span><span class="s">"&gt;
          &lt;thead class="</span><span class="n">table</span><span class="o">-</span><span class="n">dark</span><span class="s">"&gt;
              &lt;tr&gt;
                  &lt;th&gt;번호&lt;/th&gt;
                  &lt;th&gt;제목&lt;/th&gt;
                  &lt;th&gt;작성일시&lt;/th&gt;
              &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
              &lt;tr th:each="</span><span class="n">question</span><span class="o">,</span> <span class="n">loop</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="n">questionList</span><span class="o">}</span><span class="s">"&gt;
                  &lt;td th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">loop</span><span class="o">.</span><span class="na">count</span><span class="o">}</span><span class="s">"&gt;&lt;/td&gt;
                  &lt;td&gt;
                      &lt;a th:href="</span><span class="err">@</span><span class="o">{|/</span><span class="n">question</span><span class="o">/</span><span class="n">detail</span><span class="o">/</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">id</span><span class="o">}|}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">subject</span><span class="o">}</span><span class="s">"&gt;&lt;/a&gt;
                  &lt;/td&gt;
                  &lt;td th:text="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">temporals</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">createDate</span><span class="o">,</span> <span class="err">'</span><span class="n">yyyy</span><span class="o">-</span><span class="no">MM</span><span class="o">-</span><span class="n">dd</span> <span class="nl">HH:</span><span class="n">mm</span><span class="err">'</span><span class="o">)}</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
              <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
          <span class="o">&lt;/</span><span class="n">tbody</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li>테이블 항목으로 ‘번호’를 추가했다. 번호는 <code class="language-plaintext highlighter-rouge">loop.count</code>를 사용하여 표시<ul><li><code class="language-plaintext highlighter-rouge">loop.count</code>는 <code class="language-plaintext highlighter-rouge">questionList</code>의 항목을 <code class="language-plaintext highlighter-rouge">th:each</code>로 반복할 때 현재의 순서</ul><li>날짜를 보기 좋게 출력하기 위해 타임리프의 <code class="language-plaintext highlighter-rouge">#temporals.format</code> 기능을 사용<ul><li><code class="language-plaintext highlighter-rouge">#temporals.format</code>은 <code class="language-plaintext highlighter-rouge">#temporals.format(날짜 객체, 날짜 포맷)</code>와 같이 사용</ul><li><code class="language-plaintext highlighter-rouge">class="container my-3"</code>, <code class="language-plaintext highlighter-rouge">class="table"</code>, <code class="language-plaintext highlighter-rouge">class="table-dark</code> 등은 <code class="language-plaintext highlighter-rouge">bootstrap.min.css</code>에 이미 정의되어 있는 클래스들로 간격을 조정하고 테이블에 스타일을 지정하는 용도로 사용</ul></ul><p><br /></p><ul><li><p><span class="path">question_detail.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/bootstrap.min.css}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
      &lt;!-- 질문 --&gt;
      &lt;h2 class="</span><span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">py</span><span class="o">-</span><span class="mi">2</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">subject</span><span class="o">}</span><span class="s">"&gt;&lt;/h2&gt;
      &lt;div class="</span><span class="n">card</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">body</span><span class="s">"&gt;
              &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">text</span><span class="s">" style="</span><span class="n">white</span><span class="o">-</span><span class="nl">space:</span> <span class="n">pre</span><span class="o">-</span><span class="n">line</span><span class="o">;</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">content</span><span class="o">}</span><span class="s">"&gt;&lt;/div&gt;
              &lt;div class="</span><span class="n">d</span><span class="o">-</span><span class="n">flex</span> <span class="n">justify</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">end</span><span class="s">"&gt;
                  &lt;div class="</span><span class="n">badge</span> <span class="n">bg</span><span class="o">-</span><span class="n">light</span> <span class="n">text</span><span class="o">-</span><span class="n">dark</span> <span class="n">p</span><span class="o">-</span><span class="mi">2</span> <span class="n">text</span><span class="o">-</span><span class="n">start</span><span class="s">"&gt;
                      &lt;div th:text="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">temporals</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">createDate</span><span class="o">,</span> <span class="err">'</span><span class="n">yyyy</span><span class="o">-</span><span class="no">MM</span><span class="o">-</span><span class="n">dd</span> <span class="nl">HH:</span><span class="n">mm</span><span class="err">'</span><span class="o">)}</span><span class="s">"&gt;&lt;/div&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 답변의 갯수 표시 --&gt;
      &lt;h5 class="</span><span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span> <span class="n">py</span><span class="o">-</span><span class="mi">2</span><span class="s">" 
          th:text="</span><span class="o">|</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">lists</span><span class="o">.</span><span class="na">size</span><span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">answerList</span><span class="o">)}</span><span class="n">개의</span> <span class="n">답변이</span> <span class="n">있습니다</span><span class="o">.|</span><span class="s">"&gt;&lt;/h5&gt;
      &lt;!-- 답변 반복 시작 --&gt;
      &lt;div class="</span><span class="n">card</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">" th:each="</span><span class="n">answer</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">answerList</span><span class="o">}</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">body</span><span class="s">"&gt;
              &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">text</span><span class="s">" style="</span><span class="n">white</span><span class="o">-</span><span class="nl">space:</span> <span class="n">pre</span><span class="o">-</span><span class="n">line</span><span class="o">;</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">answer</span><span class="o">.</span><span class="na">content</span><span class="o">}</span><span class="s">"&gt;&lt;/div&gt;
              &lt;div class="</span><span class="n">d</span><span class="o">-</span><span class="n">flex</span> <span class="n">justify</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">end</span><span class="s">"&gt;
                  &lt;div class="</span><span class="n">badge</span> <span class="n">bg</span><span class="o">-</span><span class="n">light</span> <span class="n">text</span><span class="o">-</span><span class="n">dark</span> <span class="n">p</span><span class="o">-</span><span class="mi">2</span> <span class="n">text</span><span class="o">-</span><span class="n">start</span><span class="s">"&gt;
                      &lt;div th:text="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">temporals</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">answer</span><span class="o">.</span><span class="na">createDate</span><span class="o">,</span> <span class="err">'</span><span class="n">yyyy</span><span class="o">-</span><span class="no">MM</span><span class="o">-</span><span class="n">dd</span> <span class="nl">HH:</span><span class="n">mm</span><span class="err">'</span><span class="o">)}</span><span class="s">"&gt;&lt;/div&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 답변 반복 끝  --&gt;
      &lt;!-- 답변 작성 --&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{|/</span><span class="n">answer</span><span class="o">/</span><span class="n">create</span><span class="o">/</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">id</span><span class="o">}|}</span><span class="s">" method="</span><span class="n">post</span><span class="s">" class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
          &lt;textarea name="</span><span class="n">content</span><span class="s">" id="</span><span class="n">content</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">답변등록</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li>부트스트랩의 <span class="red">card 컴포넌트</span>를 사용<ul><li>어떤 내용을 그룹화하여 보여 줄 때 사용</ul></ul><div class="table-wrapper"><table><thead><tr><th>부트스트랩 클래스<th>설명<tbody><tr><td><code class="language-plaintext highlighter-rouge">card</code>, <code class="language-plaintext highlighter-rouge">card-body</code>, <code class="language-plaintext highlighter-rouge">card-text</code><td>card 컴포넌트를 적용하는 클래스들이다.<tr><td><code class="language-plaintext highlighter-rouge">badge</code><td>badge 컴포넌트를 적용하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">form-control</code><td>텍스트 창에 form 컴포넌트를 적용하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">border-bottom</code><td>아래 방향 테두리 선을 만드는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">my-3</code><td>상하 마진값으로 3을 지정하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">py-2</code><td>상하 패딩값으로 2를 지정하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">p-2</code><td>상하좌우 패딩값으로 2를 지정하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">d-flex justify-content-end</code><td>HTML 요소를 오른쪽으로 정렬하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">bg-light</code><td>연회색으로 배경을 지정하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">text-dark</code><td>글자색을 검은색으로 지정하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">text-start</code><td>글자를 왼쪽으로 정렬하는 클래스이다.<tr><td><code class="language-plaintext highlighter-rouge">btn btn-primary</code><td>버튼 컴포넌트를 적용하는 클래스이다.</table></div><ul><li><strong><code class="language-plaintext highlighter-rouge">style="white-space: pre-line;"</code></strong>은 CSS 스타일 속성으로, 사용자가 입력한 대로 줄 바꿈이 적용</ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="표준-html-구조"><span class="me-2">표준 HTML 구조</span><a href="#표준-html-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>지금까지의 <code class="language-plaintext highlighter-rouge">.html</code> 파일들은 <span class="red line">표준 HTML 구조</span>로 작성되지 않았다.</ul><p><br /></p><ul><li><p><span class="red line">표준 HTML 구조</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>  <span class="o">&lt;!</span><span class="n">doctype</span> <span class="n">html</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s">"ko"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
      <span class="o">&lt;!--</span> <span class="nc">Required</span> <span class="n">meta</span> <span class="n">tags</span> <span class="o">--&gt;</span>
      <span class="o">&lt;</span><span class="n">meta</span> <span class="n">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="n">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1, shrink-to-fit=no"</span><span class="o">&gt;</span>
      <span class="o">&lt;!--</span> <span class="nc">Bootstrap</span> <span class="no">CSS</span> <span class="o">--&gt;</span>
      <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/bootstrap.min.css}"</span><span class="o">&gt;</span>
      <span class="o">&lt;!--</span> <span class="n">sbb</span> <span class="no">CSS</span> <span class="o">--&gt;</span>
      <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/style.css}"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">Hello</span><span class="o">,</span> <span class="n">sbb</span><span class="o">!&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
  <span class="o">(...</span> <span class="n">생략</span> <span class="o">...)</span>
  <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li>표준 HTML 문서의 구조는 <code class="language-plaintext highlighter-rouge">html</code>, <code class="language-plaintext highlighter-rouge">head</code>, <code class="language-plaintext highlighter-rouge">body</code> 요소가 있어야 하며, CSS 파일은 <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> 태그 안에 링크되어야 한다.<li>또한 <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> 태그 안에는 <code class="language-plaintext highlighter-rouge">meta</code>, <code class="language-plaintext highlighter-rouge">title</code> 요소 등이 포함되어야 한다</ul></ul><p><br /></p><p><br /></p><h3 id="템플릿에-표준-html-구조-적용하기"><span class="me-2">템플릿에 표준 HTML 구조 적용하기</span><a href="#템플릿에-표준-html-구조-적용하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>각각의 <code class="language-plaintext highlighter-rouge">.html</code> 파일 모두에 <span class="purple">중복되는 내용</span>이 존재</p><p>⇒   <span class="red line">템플릿 상속</span> 사용</p><ul><li><p><span class="path">template/domain/layout.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>  <span class="o">&lt;!</span><span class="n">doctype</span> <span class="n">html</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s">"ko"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
      <span class="o">&lt;!--</span> <span class="nc">Required</span> <span class="n">meta</span> <span class="n">tags</span> <span class="o">--&gt;</span>
      <span class="o">&lt;</span><span class="n">meta</span> <span class="n">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="n">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1, shrink-to-fit=no"</span><span class="o">&gt;</span>
      <span class="o">&lt;!--</span> <span class="nc">Bootstrap</span> <span class="no">CSS</span> <span class="o">--&gt;</span>
      <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/bootstrap.min.css}"</span><span class="o">&gt;</span>
      <span class="o">&lt;!--</span> <span class="n">sbb</span> <span class="no">CSS</span> <span class="o">--&gt;</span>
      <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/style.css}"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">Hello</span><span class="o">,</span> <span class="n">sbb</span><span class="o">!&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
  <span class="o">&lt;!--</span> <span class="n">기본</span> <span class="n">템플릿</span> <span class="n">안에</span> <span class="n">삽입될</span> <span class="n">내용</span> <span class="nc">Start</span> <span class="o">--&gt;</span>
  <span class="o">&lt;</span><span class="nl">th:</span><span class="n">block</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span><span class="o">&gt;&lt;/</span><span class="nl">th:</span><span class="n">block</span><span class="o">&gt;</span>
  <span class="o">&lt;!--</span> <span class="n">기본</span> <span class="n">템플릿</span> <span class="n">안에</span> <span class="n">삽입될</span> <span class="n">내용</span> <span class="nc">End</span> <span class="o">--&gt;</span>
  <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">&lt;th:block layout:fragment="content"&gt;&lt;/th:block&gt;</code><ul><li><code class="language-plaintext highlighter-rouge">layout.html</code>을 <span class="back">상속한 템플릿에서 개별적으로 구현해야 하는 영역</span><li>상속 받고 <span class="blue">이 영역만 수정</span>해도 표준 HTML 문서가 된다.</ul></ul></ul><p><br /></p><ul><li><p><span class="path">template/domain/question/question_list.html   /   question_detail</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
      &lt;table class="</span><span class="n">table</span><span class="s">"&gt;
          &lt;thead class="</span><span class="n">table</span><span class="o">-</span><span class="n">dark</span><span class="s">"&gt;
          &lt;tr&gt;
              &lt;th&gt;번호&lt;/th&gt;
              &lt;th&gt;제목&lt;/th&gt;
              &lt;th&gt;작성일시&lt;/th&gt;
          &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
          &lt;tr th:each="</span><span class="n">question</span><span class="o">,</span> <span class="n">loop</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="n">questionList</span><span class="o">}</span><span class="s">"&gt;
              &lt;td th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">loop</span><span class="o">.</span><span class="na">count</span><span class="o">}</span><span class="s">"&gt;&lt;/td&gt;
              &lt;td&gt;
                  &lt;a th:href="</span><span class="err">@</span><span class="o">{|/</span><span class="n">question</span><span class="o">/</span><span class="n">detail</span><span class="o">/</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">id</span><span class="o">}|}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">subject</span><span class="o">}</span><span class="s">"&gt;&lt;/a&gt;
              &lt;/td&gt;
              &lt;td th:text="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">temporals</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">createDate</span><span class="o">,</span> <span class="err">'</span><span class="n">yyyy</span><span class="o">-</span><span class="no">MM</span><span class="o">-</span><span class="n">dd</span> <span class="nl">HH:</span><span class="n">mm</span><span class="err">'</span><span class="o">)}</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
          <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
          <span class="o">&lt;/</span><span class="n">tbody</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
      &lt;!-- 질문 --&gt;
      &lt;h2 class="</span><span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">py</span><span class="o">-</span><span class="mi">2</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">subject</span><span class="o">}</span><span class="s">"&gt;&lt;/h2&gt;
      &lt;div class="</span><span class="n">card</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">body</span><span class="s">"&gt;
              &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">text</span><span class="s">" style="</span><span class="n">white</span><span class="o">-</span><span class="nl">space:</span> <span class="n">pre</span><span class="o">-</span><span class="n">line</span><span class="o">;</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">content</span><span class="o">}</span><span class="s">"&gt;&lt;/div&gt;
              &lt;div class="</span><span class="n">d</span><span class="o">-</span><span class="n">flex</span> <span class="n">justify</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">end</span><span class="s">"&gt;
                  &lt;div class="</span><span class="n">badge</span> <span class="n">bg</span><span class="o">-</span><span class="n">light</span> <span class="n">text</span><span class="o">-</span><span class="n">dark</span> <span class="n">p</span><span class="o">-</span><span class="mi">2</span> <span class="n">text</span><span class="o">-</span><span class="n">start</span><span class="s">"&gt;
                      &lt;div th:text="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">temporals</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">createDate</span><span class="o">,</span> <span class="err">'</span><span class="n">yyyy</span><span class="o">-</span><span class="no">MM</span><span class="o">-</span><span class="n">dd</span> <span class="nl">HH:</span><span class="n">mm</span><span class="err">'</span><span class="o">)}</span><span class="s">"&gt;&lt;/div&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 답변의 갯수 표시 --&gt;
      &lt;h5 class="</span><span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span> <span class="n">py</span><span class="o">-</span><span class="mi">2</span><span class="s">"
          th:text="</span><span class="o">|</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">lists</span><span class="o">.</span><span class="na">size</span><span class="o">(</span><span class="n">question</span><span class="o">.</span><span class="na">answerList</span><span class="o">)}</span><span class="n">개의</span> <span class="n">답변이</span> <span class="n">있습니다</span><span class="o">.|</span><span class="s">"&gt;&lt;/h5&gt;
      &lt;!-- 답변 반복 시작 --&gt;
      &lt;div class="</span><span class="n">card</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">" th:each="</span><span class="n">answer</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">answerList</span><span class="o">}</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">body</span><span class="s">"&gt;
              &lt;div class="</span><span class="n">card</span><span class="o">-</span><span class="n">text</span><span class="s">" style="</span><span class="n">white</span><span class="o">-</span><span class="nl">space:</span> <span class="n">pre</span><span class="o">-</span><span class="n">line</span><span class="o">;</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">answer</span><span class="o">.</span><span class="na">content</span><span class="o">}</span><span class="s">"&gt;&lt;/div&gt;
              &lt;div class="</span><span class="n">d</span><span class="o">-</span><span class="n">flex</span> <span class="n">justify</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">end</span><span class="s">"&gt;
                  &lt;div class="</span><span class="n">badge</span> <span class="n">bg</span><span class="o">-</span><span class="n">light</span> <span class="n">text</span><span class="o">-</span><span class="n">dark</span> <span class="n">p</span><span class="o">-</span><span class="mi">2</span> <span class="n">text</span><span class="o">-</span><span class="n">start</span><span class="s">"&gt;
                      &lt;div th:text="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">temporals</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">answer</span><span class="o">.</span><span class="na">createDate</span><span class="o">,</span> <span class="err">'</span><span class="n">yyyy</span><span class="o">-</span><span class="no">MM</span><span class="o">-</span><span class="n">dd</span> <span class="nl">HH:</span><span class="n">mm</span><span class="err">'</span><span class="o">)}</span><span class="s">"&gt;&lt;/div&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 답변 반복 끝  --&gt;
      &lt;!-- 답변 작성 --&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{|/</span><span class="n">answer</span><span class="o">/</span><span class="n">create</span><span class="o">/</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">id</span><span class="o">}|}</span><span class="s">" method="</span><span class="n">post</span><span class="s">" class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
          &lt;textarea name="</span><span class="n">content</span><span class="s">" id="</span><span class="n">content</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">답변등록</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
        
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">&lt;html layout:decorate="~{layout}"&gt;</code><ul><li>타임리프의 <strong><code class="language-plaintext highlighter-rouge">layout:decorate</code></strong><ul><li>템플릿의 레이아웃(부모 템플릿, 여기서는 <code class="language-plaintext highlighter-rouge">layout.html</code>)으로 사용할 템플릿을 설정<li>속성값인 <code class="language-plaintext highlighter-rouge">~{layout}</code>이 바로 <code class="language-plaintext highlighter-rouge">layout.html</code> 파일을 의미</ul><li><strong><code class="language-plaintext highlighter-rouge">&lt;div layout:fragment="content" class="container my-3"&gt;</code></strong><ul><li><span class="back">이 &lt;div&gt; 내부의 것이 이동하는 것</span>이다.</ul></ul></ul><p><br /></p><ul><li>부모 템플릿인 <code class="language-plaintext highlighter-rouge">layout.html</code><ul><li><code class="language-plaintext highlighter-rouge">&lt;th:block layout:fragment="content"&gt;&lt;/th:block&gt;</code><ul><li>부모 템플릿의 <code class="language-plaintext highlighter-rouge">th:block</code> 요소의 내용이 자식 템플릿의 <code class="language-plaintext highlighter-rouge">div</code> 요소의 내용으로 교체된다</ul></ul></ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="질문-등록-버튼-만들기"><span class="me-2">질문 등록 버튼 만들기</span><a href="#질문-등록-버튼-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><span class="path">question_list.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">a</span> <span class="nl">th:</span><span class="n">href</span><span class="o">=</span><span class="s">"@{/question/create}"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span><span class="err">"</span><span class="o">&gt;</span><span class="n">질문</span> <span class="n">등록하기</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li>이 1줄을 추가한다.</ul></ul><p><br /></p><ul><li>URL 매핑하기   (<code class="language-plaintext highlighter-rouge">/question/create</code>)<ul><li><p><span class="path">QuestionController</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/create"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">questionCreate</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"question_form"</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><li><p><span class="path">question_form.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span><span class="s">"&gt;
      &lt;h5 class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span> <span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">pb</span><span class="o">-</span><span class="mi">2</span><span class="s">"&gt;질문등록&lt;/h5&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{/</span><span class="n">question</span><span class="o">/</span><span class="n">create</span><span class="o">}</span><span class="s">" method="</span><span class="n">post</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">subject</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;제목&lt;/label&gt;
              &lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">subject</span><span class="s">" id="</span><span class="n">subject</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;
          &lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">content</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;내용&lt;/label&gt;
              &lt;textarea name="</span><span class="n">content</span><span class="s">" id="</span><span class="n">content</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;/div&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">저장하기</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><p>그러나 저장하기 버튼을 누르면 <span class="error">405 오류</span> 발생</p><p><span class="red line">‘Method Not Allowed’</span>라는 의미로, <code class="language-plaintext highlighter-rouge">/question/create</code> URL을 <span class="back">POST 방식</span>으로는 처리할 수 없음을 나타낸다</p><p>⇒   POST 처리를 추가한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/create"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">questionCreate</span><span class="o">(</span>
    <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">"subject"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">subject</span><span class="o">,</span> 
    <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">"content"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"redirect:/question/list"</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><span class="error">문제</span><ul><li><p><span class="line">질문을 등록할 때 비어 있는 값으로도 등록할 수 있다</span></p><p>⇒   <strong><code class="language-plaintext highlighter-rouge">Form 클래스</code></strong>를 생성하여 제어한다.</p></ul></ul></ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><p><br /></p><h2 id="url"><span class="me-2">URL</span><a href="#url" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><strong>루트 URL</strong><ul><li>서버의 URL을 요청할 때 도메인명 뒤에 아무런 주소도 덧붙이지 않는 URL을 루트 URL<li>[ex]<ul><li><code class="language-plaintext highlighter-rouge">http://localhost:8080</code><li><code class="language-plaintext highlighter-rouge">google.com</code></ul></ul></ul><p><br /></p><p><br /></p><ul><li><p><span class="path">MainController</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  <span class="nd">@Controller</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainController</span> <span class="o">{</span>
    
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"redirect:/question/list"</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><span class="blue">루트 URL</span>로 들어오면 <code class="language-plaintext highlighter-rouge">/question/list</code>로 보내는 것<li><span class="greenback"> 리다이렉트란 클라이언트가 요청하면 새로운 URL로 전송하는 것</span></ul></ul><p><br /></p><p><br /></p><p><br /></p><p><br /></p><h2 id="form-클래스"><span class="me-2">Form 클래스</span><a href="#form-클래스" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="spring-boot-validation-라이브러리"><span class="me-2"><strong>Spring Boot Validation 라이브러리</strong></span><a href="#spring-boot-validation-라이브러리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><span class="path">build.gradle</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="n">dependencies</span> <span class="o">{</span>
      <span class="o">(...</span> <span class="n">생략</span> <span class="o">...)</span>
      <span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">validation</span><span class="err">'</span>
  <span class="o">}</span>
</pre></table></code></div></div></ul><p><br /></p><ul><li><p>Spring Boot Validation 라이브러리의 <span class="red">기능</span></p><div class="table-wrapper"><table><thead><tr><th>항목<th>설명<tbody><tr><td><code class="language-plaintext highlighter-rouge">@Size</code><td>문자 길이를 제한한다.<tr><td><code class="language-plaintext highlighter-rouge">@NotNull</code><td>Null을 허용하지 않는다.<tr><td><code class="language-plaintext highlighter-rouge">@NotEmpty</code><td>Null 또는 빈 문자열(““)을 허용하지 않는다.<tr><td><code class="language-plaintext highlighter-rouge">@Past</code><td>과거 날짜만 입력할 수 있다.<tr><td><code class="language-plaintext highlighter-rouge">@Future</code><td>미래 날짜만 입력할 수 있다.<tr><td><code class="language-plaintext highlighter-rouge">@FutureOrPresent</code><td>미래 또는 오늘 날짜만 입력할 수 있다.<tr><td><code class="language-plaintext highlighter-rouge">@Max</code><td>최댓값 이하의 값만 입력할 수 있도록 제한한다.<tr><td><code class="language-plaintext highlighter-rouge">@Min</code><td>최솟값 이상의 값만 입력할 수 있도록 제한한다.<tr><td><code class="language-plaintext highlighter-rouge">@Pattern</code><td>입력값을 정규식 패턴으로 검증한다.</table></div><ul><li>보다 많은 기능(https://beanvalidation.org/)</ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="form-클래스-생성"><span class="me-2">Form 클래스 생성</span><a href="#form-클래스-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><span class="path">/question/QuestionForm.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>  <span class="kn">import</span> <span class="nn">jakarta.validation.constraints.NotEmpty</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">jakarta.validation.constraints.Size</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Getter</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">lombok.Setter</span><span class="o">;</span>
    
  <span class="nd">@Getter</span>
  <span class="nd">@Setter</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuestionForm</span> <span class="o">{</span>
    <span class="nd">@NotEmpty</span><span class="o">(</span><span class="n">message</span><span class="o">=</span><span class="s">"제목은 필수항목입니다."</span><span class="o">)</span>
    <span class="nd">@Size</span><span class="o">(</span><span class="n">max</span><span class="o">=</span><span class="mi">200</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">subject</span><span class="o">;</span>
    
    <span class="nd">@NotEmpty</span><span class="o">(</span><span class="n">message</span><span class="o">=</span><span class="s">"내용은 필수항목입니다."</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><strong><code class="language-plaintext highlighter-rouge">@NotEmpty</code></strong><ul><li>해당 값이 <span class="red back">Null 또는 빈 문자열(““)을 허용하지 않음</span>을 의미<li><code class="language-plaintext highlighter-rouge">message</code>는 검증이 실패할 경우 화면에 표시할 <span class="pink">오류 메시지</span></ul></ul><p><br /></p><ul><li><strong><code class="language-plaintext highlighter-rouge">@Size</code></strong><ul><li><code class="language-plaintext highlighter-rouge">max=200</code>은 <span class="pink">최대 길이가 200 바이트(byte)를 넘으면 안 된다</span>는 의미</ul></ul><p><br /></p><ul><li><span class="red">폼 클래스</span>는 입력값 검증할 때뿐만 아니라 <span class="blueline">입력 항목을 바인딩할 때도 사용</span>한다.<ul><li><code class="language-plaintext highlighter-rouge">question_form.html</code> 템플릿의 입력 항목인 <span class="blue">subject</span>와 <span class="blue">content</span>가 <span class="red">폼 클래스</span>의 <code class="language-plaintext highlighter-rouge">subject</code>, <code class="language-plaintext highlighter-rouge">content</code> 속성과 <span class="red line">바인딩</span>된다.</ul></ul></ul><p><br /></p><p><br /></p><ul><li><span class="blue">컨트롤러</span>에 전송하기<ul><li><p><span class="path">QuestionController.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/create"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">questionCreate</span><span class="o">(</span>
      <span class="nd">@Valid</span> <span class="nc">QuestionForm</span> <span class="n">questionForm</span><span class="o">,</span> 
      <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bindingResult</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"domain/question/question_form"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">questionService</span><span class="o">.</span><span class="na">createQuestion</span><span class="o">(</span><span class="n">questionForm</span><span class="o">.</span><span class="na">getSubject</span><span class="o">(),</span> <span class="n">questionForm</span><span class="o">.</span><span class="na">getContent</span><span class="o">());</span>
    <span class="k">return</span> <span class="s">"redirect:/question/list"</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><strong><code class="language-plaintext highlighter-rouge">questionCreate()</code></strong> 메서드의 매개변수를 <code class="language-plaintext highlighter-rouge">subject</code>, <code class="language-plaintext highlighter-rouge">content</code> 대신 <strong><code class="language-plaintext highlighter-rouge">QuestionForm</code></strong> 객체로 변경<ul><li><p><code class="language-plaintext highlighter-rouge">subject</code>, <code class="language-plaintext highlighter-rouge">content</code> 항목을 지닌 <span class="red">폼이 전송되면</span> <strong><code class="language-plaintext highlighter-rouge">QuestionForm</code></strong>의 <code class="language-plaintext highlighter-rouge">subject</code>, <code class="language-plaintext highlighter-rouge">content</code> 속성이 <span class="back">자동으로 바인딩된다</span></p><p>(이렇게 <span class="green">이름이 동일하면</span> 함께 <span class="red">연결되어 묶이는 것</span>이 바로 폼의 바인딩 기능이다)</p></ul><li><strong><code class="language-plaintext highlighter-rouge">@Valid</code></strong> 애너테이션<ul><li><code class="language-plaintext highlighter-rouge">QuestionForm</code>의 <strong><code class="language-plaintext highlighter-rouge">@NotEmpty</code></strong>, <strong><code class="language-plaintext highlighter-rouge">@Size</code></strong> 등으로 설정한 <span class="red">검증 기능</span>이 <span class="red">동작</span>한다.</ul><li><strong><code class="language-plaintext highlighter-rouge">BindingResult</code></strong> 매개변수 <span class="red">★</span><ul><li><code class="language-plaintext highlighter-rouge">@Valid</code> 애너테이션으로 <span class="greenback">검증이 수행된 결과를 의미하는 객체</span><li><p><strong><code class="language-plaintext highlighter-rouge">BindingResult</code></strong> 매개변수는 <span class="back">항상 <code class="language-plaintext highlighter-rouge">@Valid</code> 매개변수 바로 뒤에 위치해야 한다</span></p><p>⇒   아니라면 입력값 검증 실패 시 <span class="error">400 오류</span> 발생</p><li><p><code class="language-plaintext highlighter-rouge">questionCreate</code> 메서드는 <code class="language-plaintext highlighter-rouge">bindResult.hasErrors()</code>를 호출</p><p>⇒   <span class="pink">오류가 있는 경우</span>에는 다시 제목과 내용을 작성하는 화면으로 돌아가도록 설정</p></ul></ul><p><br /></p><ul><li>하지만 <code class="language-plaintext highlighter-rouge">QuestionForm</code>에 설정한 <span class="green">‘제목은 필수 항목입니다.’와 같은 오류 메시지</span>는 <span class="line">보이지 않는다</span>.</ul></ul></ul><p><br /></p><p><br /></p><h3 id="검증에-실패했다는-오류-메시지-보여주기-"><span class="me-2">검증에 실패했다는 오류 메시지 보여주기 ⭐⭐</span><a href="#검증에-실패했다는-오류-메시지-보여주기-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><span class="path">/templates/question_form.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span><span class="s">"&gt;
      &lt;h5 class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span> <span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">pb</span><span class="o">-</span><span class="mi">2</span><span class="s">"&gt;질문등록&lt;/h5&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{/</span><span class="n">question</span><span class="o">/</span><span class="n">create</span><span class="o">}</span><span class="s">" th:object="</span><span class="err">$</span><span class="o">{</span><span class="n">questionForm</span><span class="o">}</span><span class="s">" method="</span><span class="n">post</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">alert</span> <span class="n">alert</span><span class="o">-</span><span class="n">danger</span><span class="s">" role="</span><span class="n">alert</span><span class="s">" th:if="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">hasAnyErrors</span><span class="o">()}</span><span class="s">"&gt;
              &lt;div th:each="</span><span class="n">err</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">allErrors</span><span class="o">()}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">err</span><span class="o">}</span><span class="s">" /&gt;
          &lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">subject</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;제목&lt;/label&gt;
              &lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">subject</span><span class="s">" id="</span><span class="n">subject</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;
          &lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">content</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;내용&lt;/label&gt;
              &lt;textarea name="</span><span class="n">content</span><span class="s">" id="</span><span class="n">content</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;/div&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">저장하기</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><p>검증에 실패할 경우 <span class="red">오류 메시지</span>를 출력할 수 있도록 수정했다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">form</span> <span class="nl">th:</span><span class="n">action</span><span class="o">=</span><span class="s">"@{/question/create}"</span> <span class="nl">th:</span><span class="n">object</span><span class="o">=</span><span class="s">"${questionForm}"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">div</span> <span class="kd">class</span><span class="err">="</span><span class="nc">alert</span> <span class="n">alert</span><span class="o">-</span><span class="n">danger</span><span class="s">" role="</span><span class="n">alert</span><span class="s">" th:if="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">hasAnyErrors</span><span class="o">()}</span><span class="s">"&gt;
          &lt;div th:each="</span><span class="n">err</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">allErrors</span><span class="o">()}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">err</span><span class="o">}</span><span class="err">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><p><strong><code class="language-plaintext highlighter-rouge">#fields.hasAnyErrors()</code></strong>가 true라면 <code class="language-plaintext highlighter-rouge">QuestionForm</code> 검증이 실패한 것</p><p><code class="language-plaintext highlighter-rouge">#fields.allErrors()</code>에는 <span class="blue">오류의 내용</span>이 담겨 있다.</p></ul><p><br /></p><ul><li>부트스트랩의 <strong><code class="language-plaintext highlighter-rouge">alert alert-danger</code></strong> 클래스를 사용하여 오류 메시지가 붉은 색으로 표시되도록 설정<li>오류를 표시하려면 <span class="purple">타임리프</span>의 <strong><code class="language-plaintext highlighter-rouge">th:object</code></strong> 속성이 반드시 필요<ul><li><code class="language-plaintext highlighter-rouge">&lt;form&gt;</code>의 입력 항목들이 <code class="language-plaintext highlighter-rouge">QuestionForm</code>과 <span class="red">연결된다는 점</span>을 타임리프에 <span class="green">알려주는 역할</span>을 한다.</ul></ul><p><br /></p><ul><li>그러나 <span class="red">오류</span> 발생<ul><li><code class="language-plaintext highlighter-rouge">th:object</code> 속성을 추가한 것에 따른 <code class="language-plaintext highlighter-rouge">GetMapping</code>으로 매핑한 메서드도 변경해야 한다.<ul><li><p>기존의 메서드</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"create"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">create</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"domain/question/question_form"</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><li><p><span class="path">QuestionController.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/create"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">questionCreate</span><span class="o">(</span><span class="nc">QuestionForm</span> <span class="n">questionForm</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"domain/question/question_form"</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">@GetMapping</code>으로 매핑한 <code class="language-plaintext highlighter-rouge">questionCreate</code> 메서드에 매개변수로 <code class="language-plaintext highlighter-rouge">QuestionForm</code> 객체를 추가<li><p>이렇게 하면 이제 <span class="blue">GET 방식</span>에서도 <code class="language-plaintext highlighter-rouge">question_form</code> 템플릿에 <code class="language-plaintext highlighter-rouge">QuestionForm</code> 객체가 전달된다.</p><p>⇒   <code class="language-plaintext highlighter-rouge">QuestionForm</code>과 같이 매개변수로 바인딩한 객체는 <span class="back">Model 객체로 전달하지 않아도 템플릿에서 사용할 수 있다</span>.</p></ul></ul></ul></ul></ul><p><br /></p><li><p>즉, <strong><code class="language-plaintext highlighter-rouge">&lt;form th:object="${questionForm}"&gt;</code></strong>가 사용된 경우, <code class="language-plaintext highlighter-rouge">GET</code> 요청으로 페이지를 렌더링할 때도 폼 객체(<code class="language-plaintext highlighter-rouge">questionForm</code>)가 필요하다. ⭐</p><ul><li><code class="language-plaintext highlighter-rouge">th:object</code>는 <span class="red">HTML 폼</span>과 <span class="blue">서버의 폼 객체</span>를 <span class="line">매핑하기 때문</span>이다.</ul><p><a href="/assets/img/posts/springboot-jpa/image 1.png" class="popup img-link left shimmer"><img src="/assets/img/posts/springboot-jpa/image 1.png" alt="" width="500" height="250" loading="lazy"></a></p><div class="clear"></div></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="또-다른-오류--알맞은-값도-오류-발생-시-값이-사라짐"><span class="me-2">또 다른 오류 : 알맞은 값도 오류 발생 시 값이 사라짐</span><a href="#또-다른-오류--알맞은-값도-오류-발생-시-값이-사라짐" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>제목을 입력하고 내용을 비워 둔 채로 [저장하기] 버튼을 누르면 오류 메시지가 나타남과 동시에 이미 입력한 제목도 사라진다<ul><li><p><span class="path">question_formhtml</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span><span class="s">"&gt;
      &lt;h5 class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span> <span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">pb</span><span class="o">-</span><span class="mi">2</span><span class="s">"&gt;질문등록&lt;/h5&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{/</span><span class="n">question</span><span class="o">/</span><span class="n">create</span><span class="o">}</span><span class="s">" th:object="</span><span class="err">$</span><span class="o">{</span><span class="n">questionForm</span><span class="o">}</span><span class="s">" method="</span><span class="n">post</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">alert</span> <span class="n">alert</span><span class="o">-</span><span class="n">danger</span><span class="s">" role="</span><span class="n">alert</span><span class="s">" th:if="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">hasAnyErrors</span><span class="o">()}</span><span class="s">"&gt;
              &lt;div th:each="</span><span class="n">err</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">allErrors</span><span class="o">()}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">err</span><span class="o">}</span><span class="s">" /&gt;
          &lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">subject</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;제목&lt;/label&gt;
              &lt;input type="</span><span class="n">text</span><span class="s">" th:field="</span><span class="o">*{</span><span class="n">subject</span><span class="o">}</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;
          &lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">content</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;내용&lt;/label&gt;
              &lt;textarea th:field="</span><span class="o">*{</span><span class="n">content</span><span class="o">}</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;/div&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">저장하기</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">*name*="subject"</code>과 <code class="language-plaintext highlighter-rouge">*id*="subject"</code>를 제외하고 <code class="language-plaintext highlighter-rouge">th:field="*{subject}"</code>를 설정<ul><li><span class="green">이미 입력한 값</span>이 <span class="blue">유지되도록 설정</span>한 것<li>이렇게 하면 해당 태그의 <code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">name</code>, <code class="language-plaintext highlighter-rouge">value</code> 속성이 <span class="pink">모두 자동으로 생성</span>되고 타임리프가 value 속성에 기존에 입력된 값을 채워 넣어 <span class="pink">오류가 발생하더라도</span> 기존에 입력한 값이 유지</ul></ul></ul></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="답변-등록-기능에-폼-적용"><span class="me-2">답변 등록 기능에 폼 적용</span><a href="#답변-등록-기능에-폼-적용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><span class="path">AnswerForm.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>  <span class="nd">@Getter</span>
  <span class="nd">@Setter</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnswerForm</span> <span class="o">{</span>
    
    <span class="nd">@NotEmpty</span><span class="o">(</span><span class="n">message</span><span class="o">=</span><span class="s">"내용은 필수항목입니다."</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
  <span class="o">}</span>
</pre></table></code></div></div><li><p><span class="path">AnswerController.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre>  <span class="nd">@Controller</span>
  <span class="nd">@RequiredArgsConstructor</span>
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/answer"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnswerController</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">QuestionService</span> <span class="n">questionService</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AnswerService</span> <span class="n">answerService</span><span class="o">;</span>
    
    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"create/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">createAnswer</span><span class="o">(</span>
        <span class="nd">@PathVariable</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">,</span>
        <span class="nd">@Valid</span> <span class="nc">AnswerForm</span> <span class="n">answerForm</span><span class="o">,</span>
        <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">,</span>
        <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="nc">Question</span> <span class="n">question</span> <span class="o">=</span> <span class="n">questionService</span><span class="o">.</span><span class="na">getQuestion</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">bindingResult</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"question"</span><span class="o">,</span> <span class="n">question</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"domain/question/question_detail"</span><span class="o">;</span>
      <span class="o">}</span>
    
      <span class="n">answerService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">question</span><span class="o">,</span> <span class="n">answerForm</span><span class="o">.</span><span class="na">getContent</span><span class="o">());</span>
      <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"redirect:/question/detail/%s"</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><li><p><span class="path">question_detail.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
      &lt;!-- 질문 --&gt;
    
      .....
    
      &lt;!-- 답변 반복 끝  --&gt;
      &lt;!-- 답변 작성 --&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{|/</span><span class="n">answer</span><span class="o">/</span><span class="n">create</span><span class="o">/</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">id</span><span class="o">}|}</span><span class="s">" th:object="</span><span class="err">$</span><span class="o">{</span><span class="n">answerForm</span><span class="o">}</span><span class="s">" method="</span><span class="n">post</span><span class="s">" class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
          &lt;div class="</span><span class="n">alert</span> <span class="n">alert</span><span class="o">-</span><span class="n">danger</span><span class="s">" role="</span><span class="n">alert</span><span class="s">" th:if="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">hasAnyErrors</span><span class="o">()}</span><span class="s">"&gt;
              &lt;div th:each="</span><span class="n">err</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">allErrors</span><span class="o">()}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">err</span><span class="o">}</span><span class="s">" /&gt;
          &lt;/div&gt;
          &lt;textarea th:field="</span><span class="o">*{</span><span class="n">content</span><span class="o">}</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">답변등록</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><li><p><span class="path">QuestionController.java</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"detail/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">detail</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">,</span>
        <span class="nc">AnswerForm</span> <span class="n">answerForm</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Question</span> <span class="n">question</span> <span class="o">=</span> <span class="n">questionService</span><span class="o">.</span><span class="na">getQuestion</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
      <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"question"</span><span class="o">,</span> <span class="n">question</span><span class="o">);</span>
      <span class="k">return</span> <span class="s">"domain/question/question_detail"</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div></ul><p><br /></p><p><br /></p><p><br /></p><h3 id="공통-템플릿-만들기"><span class="me-2">공통 템플릿 만들기</span><a href="#공통-템플릿-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>오류 메시지를 출력하는 코드가 반복되어 사용되고 있다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">div</span> <span class="kd">class</span><span class="err">="</span><span class="nc">alert</span> <span class="n">alert</span><span class="o">-</span><span class="n">danger</span><span class="s">" role="</span><span class="n">alert</span><span class="s">" th:if="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">hasAnyErrors</span><span class="o">()}</span><span class="s">"&gt;
      &lt;div th:each="</span><span class="n">err</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">allErrors</span><span class="o">()}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">err</span><span class="o">}</span><span class="err">"</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><p>오류 전용 템플릿 생성 <span class="path">/templates/form_errors.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">th:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"formErrorsFragment"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">alert</span> <span class="n">alert</span><span class="o">-</span><span class="n">danger</span><span class="s">" 
      role="</span><span class="n">alert</span><span class="s">" th:if="</span><span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">hasAnyErrors</span><span class="o">()}</span><span class="s">"&gt;
      &lt;div th:each="</span><span class="n">err</span> <span class="o">:</span> <span class="err">$</span><span class="o">{</span><span class="err">#</span><span class="n">fields</span><span class="o">.</span><span class="na">allErrors</span><span class="o">()}</span><span class="s">" th:text="</span><span class="err">$</span><span class="o">{</span><span class="n">err</span><span class="o">}</span><span class="err">"</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><p><code class="language-plaintext highlighter-rouge">th:fragment="formErrorsFragment"</code>가 추가되었다.</p><p>⇒   <span class="back">다른 템플릿에서 이 <code class="language-plaintext highlighter-rouge">div</code> 태그의 영역을 사용할 수 있도록 이름을 설정한 것</span></p></ul></ul></ul><p><br /></p><p><br /></p><ul><li>기존 템플릿에 적용하기<ul><li><p><span class="path">question_form.html</span></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span><span class="s">"&gt;
      &lt;h5 class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span> <span class="n">border</span><span class="o">-</span><span class="n">bottom</span> <span class="n">pb</span><span class="o">-</span><span class="mi">2</span><span class="s">"&gt;질문등록&lt;/h5&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{/</span><span class="n">question</span><span class="o">/</span><span class="n">create</span><span class="o">}</span><span class="s">" th:object="</span><span class="err">$</span><span class="o">{</span><span class="n">questionForm</span><span class="o">}</span><span class="s">" method="</span><span class="n">post</span><span class="s">"&gt;
          &lt;div th:replace="</span><span class="o">~{</span><span class="n">form_errors</span> <span class="o">::</span> <span class="n">formErrorsFragment</span><span class="o">}</span><span class="s">"&gt;&lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">subject</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;제목&lt;/label&gt;
              &lt;input type="</span><span class="n">text</span><span class="s">" th:field="</span><span class="o">*{</span><span class="n">subject</span><span class="o">}</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;
          &lt;/div&gt;
          &lt;div class="</span><span class="n">mb</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
              &lt;label for="</span><span class="n">content</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">label</span><span class="s">"&gt;내용&lt;/label&gt;
              &lt;textarea th:field="</span><span class="o">*{</span><span class="n">content</span><span class="o">}</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;/div&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">저장하기</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">th:replace</code> 속성을 사용하면 템플릿 내에 공통 템플릿을 삽입할 수 있다. <code class="language-plaintext highlighter-rouge">&lt;div th:replace="~{form_errors :: formErrorsFragment}"&gt;&lt;/div&gt;</code>는 <code class="language-plaintext highlighter-rouge">th:replace</code> 속성에 의해 div 요소의 내용을 <code class="language-plaintext highlighter-rouge">form_errors</code> 템플릿으로 대체하라는 의미이다. 여기서 <code class="language-plaintext highlighter-rouge">formErrorsFragment</code>는 앞서 <code class="language-plaintext highlighter-rouge">form_errors</code> 템플릿에서 작성한 내용 일부를 가리키는 것이다.</ul></ul><p><br /></p><ul><li><p><span class="path">question_detail.html</span>도 마찬가지로 수정</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">html</span> <span class="nl">layout:</span><span class="n">decorate</span><span class="o">=</span><span class="s">"~{layout}"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="nl">layout:</span><span class="n">fragment</span><span class="o">=</span><span class="s">"content"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span> <span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
      (... 생략 ...)
      &lt;!-- 답변 작성 --&gt;
      &lt;form th:action="</span><span class="err">@</span><span class="o">{|/</span><span class="n">answer</span><span class="o">/</span><span class="n">create</span><span class="o">/</span><span class="err">$</span><span class="o">{</span><span class="n">question</span><span class="o">.</span><span class="na">id</span><span class="o">}|}</span><span class="s">" th:object="</span><span class="err">$</span><span class="o">{</span><span class="n">answerForm</span><span class="o">}</span><span class="s">" method="</span><span class="n">post</span><span class="s">" class="</span><span class="n">my</span><span class="o">-</span><span class="mi">3</span><span class="s">"&gt;
          &lt;div th:replace="</span><span class="o">~{</span><span class="n">form_errors</span> <span class="o">::</span> <span class="n">formErrorsFragment</span><span class="o">}</span><span class="s">"&gt;&lt;/div&gt;
          &lt;textarea th:field="</span><span class="o">*{</span><span class="n">content</span><span class="o">}</span><span class="s">" rows="</span><span class="mi">10</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">"&gt;&lt;/textarea&gt;
          &lt;input type="</span><span class="n">submit</span><span class="s">" value="</span><span class="n">답변등록</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">my</span><span class="o">-</span><span class="mi">2</span><span class="err">"</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div></ul></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/%EA%B0%9C%EC%9D%B8-%EA%B3%B5%EB%B6%80/">개인 공부</a>, <a href="/categories/spring-boot/">Spring Boot</a>, <a href="/categories/%EA%B8%B0%EC%B4%88/">기초</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/jpa/" class="post-tag no-text-decoration" >JPA</a> <a href="/tags/domain/" class="post-tag no-text-decoration" >Domain</a> <a href="/tags/thymeleaf/" class="post-tag no-text-decoration" >Thymeleaf</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%A0%90%ED%94%84%20%ED%88%AC%20%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8%202%EC%9E%A5%20-%20%EB%A6%AC%EB%B2%84&url=https%3A%2F%2Fbacknback.github.io%2Fposts%2Fspringboot-jpa-basic%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%A0%90%ED%94%84%20%ED%88%AC%20%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8%202%EC%9E%A5%20-%20%EB%A6%AC%EB%B2%84&u=https%3A%2F%2Fbacknback.github.io%2Fposts%2Fspringboot-jpa-basic%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fbacknback.github.io%2Fposts%2Fspringboot-jpa-basic%2F&text=%EC%A0%90%ED%94%84%20%ED%88%AC%20%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8%202%EC%9E%A5%20-%20%EB%A6%AC%EB%B2%84" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">최근 업데이트</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/member-module-1/">Member 모듈 리펙토링 - 개요 및 진행상황</a><li class="text-truncate lh-lg"> <a href="/posts/member-module-2/">Member 모듈 리펙토링 - 1단계</a><li class="text-truncate lh-lg"> <a href="/posts/spring-security2/">Spring Security 탐구 - 동작 원리</a><li class="text-truncate lh-lg"> <a href="/posts/spring-security/">Spring Security 탐구 - 개요</a><li class="text-truncate lh-lg"> <a href="/posts/jwt/">JWT 인증 / 인가</a></ul></section><section><h2 class="panel-heading">인기 태그</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">Docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/spring-security/">Spring Security</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EB%A9%8B%EC%9F%81%EC%9D%B4-%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/">멋쟁이 사자처럼</a> <a class="post-tag btn btn-outline-primary" href="/tags/mysql/">MySQL</a> <a class="post-tag btn btn-outline-primary" href="/tags/refactoring/">Refactoring</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/">인증/인가</a> <a class="post-tag btn btn-outline-primary" href="/tags/grasp/">GRASP</a> <a class="post-tag btn btn-outline-primary" href="/tags/ncp/">NCP</a> <a class="post-tag btn btn-outline-primary" href="/tags/server/">Server</a> <a class="post-tag btn btn-outline-primary" href="/tags/springconfig/">SpringConfig</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 mb-2">바로가기</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">관련된 글</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/project-preparation/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1733590800" data-df="YYYY/MM/DD" > 2024/12/08 </time><h4 class="pt-0 my-2">실습 프로젝트 준비</h4><div class="text-muted"><p>프로젝트를 시작하기 전 알아야 하는 것들</p></div></div></a></article><article class="col"> <a href="/posts/app-11-12/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1734483600" data-df="YYYY/MM/DD" > 2024/12/18 </time><h4 class="pt-0 my-2">App 11-12. 식별 번호 및 GRASP의 High Cohesion</h4><div class="text-muted"><p>수업 때 같이 해왔던 myapp을 혼자 해보는 글</p></div></div></a></article><article class="col"> <a href="/posts/app-10(2)/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1734332400" data-df="YYYY/MM/DD" > 2024/12/16 </time><h4 class="pt-0 my-2">App 10-2. 프로젝트 및 게시판 CRUD 구현하기</h4><div class="text-muted"><p>수업 때 같이 해왔던 myapp을 혼자 해보는 글</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/app-21/" class="btn btn-outline-primary" aria-label="이전 글" ><p>App 21. Stack과 Queue</p></a> <a href="/posts/jwt/" class="btn btn-outline-primary" aria-label="다음 글" ><p>JWT 인증 / 인가</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/backnback">이가람</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다." >일부 권리 보유</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">인기 태그</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">Docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/spring-security/">Spring Security</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EB%A9%8B%EC%9F%81%EC%9D%B4-%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/">멋쟁이 사자처럼</a> <a class="post-tag btn btn-outline-primary" href="/tags/mysql/">MySQL</a> <a class="post-tag btn btn-outline-primary" href="/tags/refactoring/">Refactoring</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9D%B8%EC%A6%9D-%EC%9D%B8%EA%B0%80/">인증/인가</a> <a class="post-tag btn btn-outline-primary" href="/tags/grasp/">GRASP</a> <a class="post-tag btn btn-outline-primary" href="/tags/ncp/">NCP</a> <a class="post-tag btn btn-outline-primary" href="/tags/server/">Server</a> <a class="post-tag btn btn-outline-primary" href="/tags/springconfig/">SpringConfig</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p><button type="button" class="btn btn-primary" aria-label="Update"> 업데이트 </button></div></aside><script> (function () { const origin = 'https://utteranc.es'; const themeMapper = Theme.getThemeMapper('github-light', 'github-dark'); const initTheme = themeMapper[Theme.visualState]; let script = document.createElement('script'); script.src = 'https://utteranc.es/client.js'; script.setAttribute('repo', 'backnback/comments'); script.setAttribute('issue-term', 'pathname'); script.setAttribute('theme', initTheme); script.crossOrigin = 'anonymous'; script.async = true; const $footer = document.querySelector('footer'); $footer.insertAdjacentElement('beforebegin', script); addEventListener('message', (event) => { let newTheme;if (event.source === window && event.data && event.data.id === Theme.ID) { newTheme = themeMapper[Theme.visualState]; const message = { type: 'set-theme', theme: newTheme }; const utterances = document.querySelector('.utterances-frame').contentWindow; utterances.postMessage(message, origin); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
